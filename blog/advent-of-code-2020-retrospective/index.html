<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dheepak Krishnamurthy">
<meta name="dcterms.date" content="2020-12-25">
<meta name="keywords" content="adventofcode, 2020, julia">

<title>kdheepak – Advent of Code 2020 Retrospective</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
q { quotes: "“" "”" "‘" "’"; }
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../.././_quarto/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
<link href="../../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/dreampulse/computer-modern-web-font/master/fonts.css">
<link href="https://fonts.googleapis.com/css?family=Fira+Code&amp;display=swap" rel="stylesheet">
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var preElements = document.querySelectorAll("pre.sourceCode");

    preElements.forEach(function (preElement) {
      var codeElement = preElement.querySelector("code");

      // First, try to get the language from the <code> element's classList
      var language = codeElement.classList[1] ? codeElement.classList[1].toLowerCase() : null;

      // If the language is not found in the <code> element, get it from the <pre> element's classList
      if (!language) {
        preElement.classList.forEach(function (className) {
          if (!["sourceCode", "code-with-copy"].includes(className)) {
            language = className.toLowerCase();
          }
        });
      }

      // Set the data-language attribute only if a language is found
      if (language && language !== "bibtex") {
        const label = document.createElement("span");
        label.textContent = language;
        label.classList = ["label"];
        label.setAttribute("data-language", language);
        preElement.parentNode.insertBefore(label, preElement);
      }
    });
  });
</script>


<link rel="stylesheet" href="../../_quarto/styles.css">
<meta property="og:title" content="kdheepak - Advent of Code 2020 Retrospective">
<meta property="og:description" content="">
<meta property="og:site_name" content="kdheepak">
<meta name="twitter:title" content="kdheepak - Advent of Code 2020 Retrospective">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../_quarto/favicon.svg" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img" aria-label="RSS">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kdheepak"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/dheepak-krishnamurthy" rel="me"> <i class="bi bi-linkedin" role="img" aria-label="linkedin">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Advent of Code 2020 Retrospective</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-advent-of-code" id="toc-why-advent-of-code" class="nav-link active" data-scroll-target="#why-advent-of-code">Why Advent of Code</a></li>
  <li><a href="#solutions" id="toc-solutions" class="nav-link" data-scroll-target="#solutions">Solutions</a>
  <ul class="collapse">
  <li><a href="#day-1-report-repair" id="toc-day-1-report-repair" class="nav-link" data-scroll-target="#day-1-report-repair">Day 1: Report Repair</a></li>
  <li><a href="#day-2-password-philosophy" id="toc-day-2-password-philosophy" class="nav-link" data-scroll-target="#day-2-password-philosophy">Day 2: Password Philosophy</a></li>
  <li><a href="#day-3-toboggan-trajectory" id="toc-day-3-toboggan-trajectory" class="nav-link" data-scroll-target="#day-3-toboggan-trajectory">Day 3: Toboggan Trajectory</a></li>
  <li><a href="#day-4-passport-processing" id="toc-day-4-passport-processing" class="nav-link" data-scroll-target="#day-4-passport-processing">Day 4: Passport Processing</a></li>
  <li><a href="#day-5-binary-boarding" id="toc-day-5-binary-boarding" class="nav-link" data-scroll-target="#day-5-binary-boarding">Day 5: Binary Boarding</a></li>
  <li><a href="#day-6-custom-customs" id="toc-day-6-custom-customs" class="nav-link" data-scroll-target="#day-6-custom-customs">Day 6: Custom Customs</a></li>
  <li><a href="#day-7-handy-haversacks" id="toc-day-7-handy-haversacks" class="nav-link" data-scroll-target="#day-7-handy-haversacks">Day 7: Handy Haversacks</a></li>
  <li><a href="#day-8-handheld-halting" id="toc-day-8-handheld-halting" class="nav-link" data-scroll-target="#day-8-handheld-halting">Day 8: Handheld Halting</a></li>
  <li><a href="#day-9-encoding-error" id="toc-day-9-encoding-error" class="nav-link" data-scroll-target="#day-9-encoding-error">Day 9: Encoding Error</a></li>
  <li><a href="#day-10-adapter-array" id="toc-day-10-adapter-array" class="nav-link" data-scroll-target="#day-10-adapter-array">Day 10: Adapter Array</a></li>
  <li><a href="#day-11-seating-system" id="toc-day-11-seating-system" class="nav-link" data-scroll-target="#day-11-seating-system">Day 11: Seating System</a></li>
  <li><a href="#day-12-rain-risk" id="toc-day-12-rain-risk" class="nav-link" data-scroll-target="#day-12-rain-risk">Day 12: Rain Risk</a></li>
  <li><a href="#day-13-shuttle-search" id="toc-day-13-shuttle-search" class="nav-link" data-scroll-target="#day-13-shuttle-search">Day 13: Shuttle Search</a></li>
  <li><a href="#day-14-docking-data" id="toc-day-14-docking-data" class="nav-link" data-scroll-target="#day-14-docking-data">Day 14: Docking Data</a></li>
  <li><a href="#day-15-rambunctious-recitation" id="toc-day-15-rambunctious-recitation" class="nav-link" data-scroll-target="#day-15-rambunctious-recitation">Day 15: Rambunctious Recitation</a></li>
  <li><a href="#day-16-ticket-translation" id="toc-day-16-ticket-translation" class="nav-link" data-scroll-target="#day-16-ticket-translation">Day 16: Ticket Translation</a></li>
  <li><a href="#day-17-conway-cubes" id="toc-day-17-conway-cubes" class="nav-link" data-scroll-target="#day-17-conway-cubes">Day 17: Conway Cubes</a></li>
  <li><a href="#day-18-operation-order" id="toc-day-18-operation-order" class="nav-link" data-scroll-target="#day-18-operation-order">Day 18: Operation Order</a></li>
  <li><a href="#day-19-monster-messages" id="toc-day-19-monster-messages" class="nav-link" data-scroll-target="#day-19-monster-messages">Day 19: Monster Messages</a></li>
  <li><a href="#day-20-jurassic-jigsaw" id="toc-day-20-jurassic-jigsaw" class="nav-link" data-scroll-target="#day-20-jurassic-jigsaw">Day 20: Jurassic Jigsaw</a></li>
  <li><a href="#day-21-allergen-assessment" id="toc-day-21-allergen-assessment" class="nav-link" data-scroll-target="#day-21-allergen-assessment">Day 21: Allergen Assessment</a></li>
  <li><a href="#day-22-crab-combat" id="toc-day-22-crab-combat" class="nav-link" data-scroll-target="#day-22-crab-combat">Day 22: Crab Combat</a></li>
  <li><a href="#day-23-crab-cups" id="toc-day-23-crab-cups" class="nav-link" data-scroll-target="#day-23-crab-cups">Day 23: Crab Cups</a></li>
  <li><a href="#day-24-lobby-layout" id="toc-day-24-lobby-layout" class="nav-link" data-scroll-target="#day-24-lobby-layout">Day 24: Lobby Layout</a></li>
  <li><a href="#day-25-combo-breaker" id="toc-day-25-combo-breaker" class="nav-link" data-scroll-target="#day-25-combo-breaker">Day 25: Combo Breaker</a></li>
  </ul></li>
  <li><a href="#final-words" id="toc-final-words" class="nav-link" data-scroll-target="#final-words">Final words</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/kdheepak/kdheepak.github.io/edit/main/blog/advent-of-code-2020-retrospective/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/kdheepak/kdheepak.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Advent of Code 2020 Retrospective</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source" data-quarto-source-url="https://github.com/kdheepak/kdheepak.github.io/blob/main/blog/advent-of-code-2020-retrospective/index.md"><i class="bi"></i> Code</button></div></div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dheepak Krishnamurthy </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 25, 2020</p>
    </div>
  </div>
  
    
  </div>
  

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>adventofcode, 2020, julia</p>
  </div>
</div>

</header>


<p>It is Christmas night, and it is the first time this month that I haven’t had to plan my schedule for the evening around a programming puzzle contest. For the last 25 days this month, I participated in <a href="https://adventofcode.com/2020/">Advent of Code 2020</a>, and I managed to collect all 50 stars!</p>
<p><img src="images/advent-of-code-2020-stars.png" class="img-fluid"></p>
<p>I solved all the puzzles in the <a href="https://julialang.org/">Julia</a> programming language, and my solutions are available <a href="https://github.com/kdheepak/adventofcode/tree/master/2020/julia/src">here</a>.</p>
<p>In this post, I wanted to share why I think you should do Advent of Code and idiomatic solutions to all 25 days in the Julia programming language.</p>
<section id="why-advent-of-code" class="level2">
<h2 class="anchored" data-anchor-id="why-advent-of-code">Why Advent of Code</h2>
<p>Advent of Code is a lot of fun. I think there’s a few reasons I find it quite enjoyable.</p>
<p>Firstly, there’s the competitive aspect of it.</p>
<p>A single puzzle unlocks every night at midnight Eastern Time, and the time when you submit a solution is recorded. There’s a global leaderboard that highlights the top 100 fastest times but you also have the ability to make a private leaderboard that you can share with anyone you like, and you can use that to track your time and challenge your friends or peers.</p>
<p>For straightforward puzzles, it is a lot of fun to see who can read, grok and type out a bug-free working program the fastest. A bunch of people also upload recordings of their attempts, and it is humbling to see how fast they can whip out a correct solution to a problem.</p>
<p>Secondly, unlike most other competitive programming challenges, the puzzles are mainly designed to be a teaching / learning experience.</p>
<p>Every puzzle has two parts, where the first part introduces a prompt, and requires you to solve it before viewing the second part. The first part tends to set up an idea or check that you are on the right track, and the second part tends to extend the idea or subvert an obvious decision you made in the first part.</p>
<p>Almost all the problems require parsing text input of various formats. In some of the latter puzzles, the puzzle inputs may be designed to hedge against certain naive solutions. Some puzzle inputs will only work with certain data structures or certain algorithms. There are a lot of <q>ah ha</q> moments when you figure what you should use and when, which makes for a very satisfying solve.</p>
<p>Most problems are based on standard computer science programming concepts, but are never presented as such. Some problems have a mathematics tilt to it, which can make finding those solutions quite rewarding. But also, every problem is designed such that even if you don’t know the <q>theory</q> behind it you’ll be able to stumble your way into solving it if you persevere. Reading other people’s one liners after you hacked it together is quite enlightening.</p>
<p>And since various programming language communities discuss their solutions in dedicated forums, there tends to be a lot of discussion about the tips and tricks you can use in your favourite programming language to express the problem more elegantly. Even after having used Python and Julia for years now, I still learn new things when I read other people’s solutions.</p>
<p>And finally, that brings me to the community.</p>
<p>The <a href="https://reddit.com/r/adventofcode">/r/adventofcode</a> subreddit and the Julia <a href="https://julialang.zulipchat.com">Zulip</a> and <a href="https://julialang.slack.com/">Slack</a> channel have been a joy to visit every day after solving the puzzles. I’ve particularly enjoyed seeing all the neat visualizations that come out of Advent of Code by the community.</p>
<p>That’s the really neat thing about Advent of Code. The problems are short enough to be solved in less than an hour, the solutions are small enough to be written in just one file, puzzles tend to tackle just one concept or idea, and there is a large enough community around it. Consequently, a lot of people tend to share their solutions, and you get to see a lot of discussion around each puzzle, including a number of different ways to approach the same problem.</p>
<p>If you’ve never heard of Advent of Code, I highly recommend you try it out. Below I’ll be discussing solutions in Julia that were shared on <a href="https://julialang.zulipchat.com">Zulip</a>, <a href="https://julialang.slack.com/">Slack</a> and <a href="https://reddit.com/r/adventofcode">Reddit</a>. This will contain spoilers for all days in Advent of Code 2020.</p>
</section>
<section id="solutions" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="solutions">Solutions</h2>
<ol type="1">
<li><a href="#day-1-report-repair">Report Repair</a></li>
<li><a href="#day-2-password-philosophy">Password Philosophy</a></li>
<li><a href="#day-3-toboggan-trajectory">Toboggan Trajectory</a></li>
<li><a href="#day-4-passport-processing">Passport Processing</a></li>
<li><a href="#day-5-binary-boarding">Binary Boarding</a></li>
<li><a href="#day-6-custom-customs">Custom Customs</a></li>
<li><a href="#day-7-handy-haversacks">Handy Haversacks</a></li>
<li><a href="#day-8-handheld-halting">Handheld Halting</a></li>
<li><a href="#day-9-encoding-error">Encoding Error</a></li>
<li><a href="#day-10-adapter-array">Adapter Array</a></li>
<li><a href="#day-11-seating-system">Seating System</a></li>
<li><a href="#day-12-rain-risk">Rain Risk</a></li>
<li><a href="#day-13-shuttle-search">Shuttle Search</a></li>
<li><a href="#day-14-docking-data">Docking Data</a></li>
<li><a href="#day-15-rambunctious-recitation">Rambunctious Recitation</a></li>
<li><a href="#day-16-ticket-translation">Ticket Translation</a></li>
<li><a href="#day-17-conway-cubes">Conway Cubes</a></li>
<li><a href="#day-18-operation-order">Operation Order</a></li>
<li><a href="#day-19-monster-messages">Monster Messages</a></li>
<li><a href="#day-20-jurassic-jigsaw">Jurassic Jigsaw</a></li>
<li><a href="#day-21-allergen-assessment">Allergen Assessment</a></li>
<li><a href="#day-22-crab-combat">Crab Combat</a></li>
<li><a href="#day-23-crab-cups">Crab Cups</a></li>
<li><a href="#day-24-lobby-layout">Lobby Layout</a></li>
<li><a href="#day-25-combo-breaker">Combo Breaker</a></li>
</ol>
<section id="day-1-report-repair" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="day-1-report-repair"><a href="https://adventofcode.com/2020/day/1">Day 1: Report Repair</a></h3>
<p>Day 1 of advent of code is basically intended to check that you have a programming language installed, and you know how to use simple features it in (e.g.&nbsp;<code>for</code> loops).</p>
<p>You can solve the first day with just multiple <code>for</code> loops. However, a more idiomatic solution can be expressed using the <code>combinations</code> function from the <a href="https://github.com/JuliaMath/Combinatorics.jl">Combinatorics.jl</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;<em>aside</em>: Python has a similar function in the standard library: <a href="https://docs.python.org/3/library/itertools.html#itertools.combinations" class="uri">https://docs.python.org/3/library/itertools.html#itertools.combinations</a></p></div></div><div class="sourceCode" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Combinatorics</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">sort</span>(<span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)))))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">expense_report</span>(data, n) <span class="op">=</span> <span class="fu">only</span>(<span class="fu">prod</span>(items) <span class="cf">for</span> items <span class="kw">in</span> <span class="fu">combinations</span>(data, n) <span class="cf">if</span> <span class="fu">sum</span>(items) <span class="op">==</span> <span class="fl">2020</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">expense_report</span>(data, <span class="fl">2</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">expense_report</span>(data, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In Julia, small functions are usually made into their single line form. Here’s how you would write it if you would like to do it in the multi-line form.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expense_report</span>(data, <span class="fl">2</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Functions also implicitly return the last expression evaluated as part of the function body, if an explicit <code>return</code> is not present.</p>
</section>
<section id="day-2-password-philosophy" class="level3">
<h3 class="anchored" data-anchor-id="day-2-password-philosophy"><a href="https://adventofcode.com/2020/day/2">Day 2: Password Philosophy</a></h3>
<p>Day 2 is a simple case of parsing, counting characters in a string and knowing that <q>exactly one</q> can be expressed using the <code>xor</code> operation.</p>
<p>The solution below is based on <a href="https://github.com/Seelengrab/AdventOfCode">Sukera’s</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">parseInput</span>(data)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> <span class="fu">split</span>.(data, <span class="st">": "</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(d) <span class="cf">do</span> (policy,password)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        rule, letter <span class="op">=</span> <span class="fu">split</span>(policy, <span class="ch">' '</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        low, high <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(rule, <span class="ch">'-'</span>))</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        (low, high, <span class="fu">only</span>(letter), <span class="fu">strip</span>(password))</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="fu">parseInput</span>(data)) <span class="cf">do</span> (low, high, letter, password)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        low <span class="op">&lt;=</span> <span class="fu">count</span>(<span class="op">==</span>(letter), password) <span class="op">&lt;=</span> high</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="fu">parseInput</span>(data)) <span class="cf">do</span> (low, high, letter, password)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        (password[low] <span class="op">==</span> letter) <span class="op">⊻</span> (password[high] <span class="op">==</span> letter)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Julia supports an infix operator for <code>xor</code>: <code>⊻</code>.</p>
<p>If a function <code>f</code> takes another function as the first argument, you can use the <code>f(c) do ... end</code> block syntax to map over every element in the collection <code>c</code> and apply the anonymous function defined by the <code>do ... end</code> block, the result of which is processed by the function <code>f</code>.</p>
<p>For example, if you would like to do the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">is_a</span>(letter) <span class="op">=</span> letter <span class="op">==</span> <span class="st">"a"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">count</span>(is_a, [<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>])</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>you can express it like so instead:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">count</span>([<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>]) <span class="cf">do</span> letter</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    letter <span class="op">==</span> <span class="st">"a"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Alternatively, you can pass in an anonymous function as the first argument by using the thin arrow <code>-&gt;</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">count</span>(letter <span class="op">-&gt;</span> letter <span class="op">==</span> <span class="st">"a"</span>, [<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>])</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In Julia, you can use the <code>only</code> function to get the one and only element in a collection.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">only</span>(<span class="st">"h"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ch">'h'</span><span class="op">:</span> ASCII<span class="op">/</span><span class="bu">Unicode</span> U<span class="op">+</span><span class="fl">0068</span> (category Ll<span class="op">:</span> Letter, lowercase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="day-3-toboggan-trajectory" class="level3">
<h3 class="anchored" data-anchor-id="day-3-toboggan-trajectory"><a href="https://adventofcode.com/2020/day/3">Day 3: Toboggan Trajectory</a></h3>
<p>A lot of advent of code problems have the puzzle input as text that represents a grid. Day 3 is our first introduction to a grid of trees.</p>
<p>Having a one liner to convert the text input to a <code>Matrix</code> can be very useful.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">permutedims</span>(<span class="fu">reduce</span>(hcat, <span class="fu">collect</span>.(<span class="fu">readlines</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>)))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here’s what the input for this particular day looks like:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> A <span class="op">=</span> <span class="fu">readInput</span>();</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">typeof</span>(A)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">Matrix</span><span class="dt">{Char} </span>(alias <span class="cf">for</span> <span class="dt">Array</span>{<span class="dt">Char</span>, <span class="fl">2</span>})</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">size</span>(A)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>(<span class="fl">323</span>, <span class="fl">31</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> xy <span class="op">=</span> <span class="fu">findall</span>(<span class="op">==</span>(<span class="ch">'#'</span>), A);</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="im">using</span> <span class="bu">SparseArrays;</span> sparse([p.I[1] for p in xy], <span class="bu">[p.I[2]</span> for p in xy], <span class="bu">[1</span> for _ in xy])</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fl">323</span><span class="op">×</span><span class="fl">31</span> <span class="dt">SparseMatrixCSC</span>{<span class="dt">Int64</span>, <span class="dt">Int64</span>} with <span class="fl">2611</span> stored entries<span class="op">:</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>⠟⣿⡿⡯⣮⣿⡇</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>⡗⣿⣿⢿⢝⣽⡇</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>⡞⡾⣟⢏⣭⢯⡂</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>⣷⣿⣿⢽⣟⣻⠇</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>⢺⣯⣗⠽⣟⣿⡂</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>⡬⡻⡯⡿⣯⣵⡇</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>⠾⣟⣿⡺⣽⣫⠅</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>⣿⡿⡏⣯⡈⣻⠅</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>⢫⢯⣿⣻⡻⡏⡁</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>⠭⡟⣻⡿⢽⣿⠇</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>⣝⣽⣷⡑⣟⢽⠇</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>⢗⣛⣱⣝⠯⡟⡇</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>⣌⣷⡛⢯⣿⡗⠇</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>⢷⠿⡍⢶⡯⣟⡅</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>⡝⣿⡻⣿⣿⢿⡂</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>⢜⠽⢯⣿⣻⣇⠁</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>⠹⢿⢻⡯⡟⡛⡅</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>⣷⣮⣽⣿⡿⡻⡃</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>⣻⡯⣞⣷⣿⡏⠆</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>⣮⡗⣟⢫⣵⣿⡆</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>⣌⣶⣾⣢⣿⣷⡅</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>⣜⡷⡿⠷⣿⣛⡁</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>⣶⣽⣮⣾⣏⡋⡅</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>⣭⣽⣃⣧⣾⣳⡃</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>⣟⣿⡿⣯⣿⡽⡀</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>⣼⣪⣗⣯⡖⡿⡃</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>⣯⢿⡹⣻⣯⣇⡇</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>⣵⣟⡝⢾⢽⣳⠅</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>⡿⣯⡿⣻⣿⣿⡃</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>⣇⣿⣟⣶⣿⣦⡇</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>⡺⣝⣷⣎⢟⣛⡅</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>⣻⢏⣯⣟⣎⣓⡅</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>⡕⣿⣿⣵⣕⢽⡇</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>⡿⣟⣿⣮⣯⣷⡃</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>⣟⡃⣇⡻⣿⣯⡇</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>⣠⣧⣾⣟⣞⢿⠀</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This solution is based on <a href="https://github.com/ferrolho/advent-of-code/blob/b34dbe9ee5eef7a36fbf77044c83acc75fbe54cf/2020/03/puzzle.jl">Henrique Ferrolho’s</a> solution.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">solve</span>(trees, slope)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">cld</span>(<span class="fu">size</span>(trees, <span class="fl">1</span>), slope.y)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> <span class="fu">range</span>(<span class="fl">1</span>, step<span class="op">=</span>slope.y, length<span class="op">=</span>n)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    cs <span class="op">=</span> <span class="fu">range</span>(<span class="fl">1</span>, step<span class="op">=</span>slope.x, length<span class="op">=</span>n)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    cs <span class="op">=</span> <span class="fu">map</span>(c <span class="op">-&gt;</span> <span class="fu">mod1</span>(c, <span class="fu">size</span>(trees, <span class="fl">2</span>)), cs)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    idxs <span class="op">=</span> <span class="fu">CartesianIndex</span>.(rs, cs)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="op">==</span>(<span class="ch">'#'</span>), trees[idxs])</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">solve</span>(data, (x <span class="op">=</span> <span class="fl">3</span>, y <span class="op">=</span> <span class="fl">1</span>))</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">prod</span>(<span class="fu">solve</span>.(<span class="fu">Ref</span>(data), [(x<span class="op">=</span><span class="fl">1</span>,y<span class="op">=</span><span class="fl">1</span>),(x<span class="op">=</span><span class="fl">5</span>,y<span class="op">=</span><span class="fl">1</span>),(x<span class="op">=</span><span class="fl">3</span>,y<span class="op">=</span><span class="fl">1</span>),(x<span class="op">=</span><span class="fl">7</span>,y<span class="op">=</span><span class="fl">1</span>),(x<span class="op">=</span><span class="fl">1</span>,y<span class="op">=</span><span class="fl">2</span>)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In Julia, you <code>==(e)</code> returns a <q>fixed</q> function which partially applies over the value of <code>e</code> and accepts one argument which you can use to test equality.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="op">==</span>(<span class="ch">'#'</span>)(<span class="ch">'#'</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cn">true</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="op">==</span>(<span class="ch">'#'</span>)(<span class="ch">'.'</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cn">false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Julia has <code>mod1</code> for 1 based mod, which is useful for indexing in these type of situations. Julia also has ceiling division (<code>cld</code>) and floor division (<code>fld</code>) which happen to be handy here.</p>
<p>Julia has support for broadcasting using the <code>f.(c)</code> syntax, which allows for the element by element application of the method <code>f</code> on every element in the collection <code>c</code>, i.e.&nbsp;<code>f(e) for e in c</code>. This tends to be very handy in Advent of Code.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> c <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>];</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">f</span>(x<span class="op">::</span><span class="dt">Int</span>) <span class="op">=</span> x <span class="op">+</span> <span class="fl">1</span>;</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">println</span>(<span class="fu">f</span>.(c))</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>[<span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Additionally, you can use <code>Ref(data)</code> to tell Julia that it is a singleton that shouldn’t be broadcast over. Alternatively, you can use <code>(data,)</code> to get the same behavior.</p>
</section>
<section id="day-4-passport-processing" class="level3">
<h3 class="anchored" data-anchor-id="day-4-passport-processing"><a href="https://adventofcode.com/2020/day/4">Day 4: Passport Processing</a></h3>
<p>Since the input has passports separated by an empty line, you can split on <code>"\n\n"</code> to get each passport into an element of a <code>Vector</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">split</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is what the first 5 passports look like:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">readInput</span>() <span class="op">|&gt;</span> x <span class="op">-&gt;</span> <span class="fu">first</span>(x, <span class="fl">3</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fl">5</span><span class="op">-</span>element <span class="dt">Vector</span>{<span class="dt">SubString</span>{<span class="dt">String</span>}}<span class="op">:</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a> <span class="st">"hgt:159cm</span><span class="sc">\n</span><span class="st">pid:561068005 eyr:2025 iyr:2017 cid:139 ecl:blu hcl:#ceb3a1</span><span class="sc">\n</span><span class="st">byr:1940"</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a> <span class="st">"iyr:2014</span><span class="sc">\n</span><span class="st">byr:1986 pid:960679613 eyr:2025 ecl:hzl"</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a> <span class="st">"cid:211 ecl:blu hcl:#7d3b0c iyr:2011 pid:006632702</span><span class="sc">\n</span><span class="st">byr:1982 eyr:2023 hgt:68in"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Julia allows piping the results of one function into another using <code>|&gt;</code>.</p>
<p>Learning how to use regex well in your programming language of choice can make solutions concise and terse. Check out this solution by <a href="https://github.com/pabloferz/AoC/blob/e64841e31d9dc9391be73b041a2e01795dafa1b6/2020/04/Day4.jl">Pablo Zubieta</a>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fields1 <span class="op">=</span> (<span class="st">r"byr"</span>, <span class="st">r"iyr"</span>, <span class="st">r"eyr"</span>, <span class="st">r"hgt"</span>, <span class="st">r"hcl"</span>, <span class="st">r"ecl"</span>, <span class="st">r"pid"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fields2 <span class="op">=</span> (</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">r"byr:</span><span class="ch">(</span><span class="st">19</span><span class="ch">[</span><span class="st">2-9</span><span class="ch">][</span><span class="st">0-9</span><span class="ch">]|</span><span class="st">200</span><span class="ch">[</span><span class="st">0-2</span><span class="ch">])</span><span class="sc">\b</span><span class="st">"</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">r"iyr:20</span><span class="ch">(</span><span class="st">1</span><span class="ch">[</span><span class="st">0-9</span><span class="ch">]|</span><span class="st">20</span><span class="ch">)</span><span class="sc">\b</span><span class="st">"</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">r"eyr:20</span><span class="ch">(</span><span class="st">2</span><span class="ch">[</span><span class="st">0-9</span><span class="ch">]|</span><span class="st">30</span><span class="ch">)</span><span class="sc">\b</span><span class="st">"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">r"hgt:</span><span class="ch">(</span><span class="st">1</span><span class="ch">([</span><span class="st">5-8</span><span class="ch">][</span><span class="st">0-9</span><span class="ch">]|</span><span class="st">9</span><span class="ch">[</span><span class="st">0-3</span><span class="ch">])</span><span class="st">cm</span><span class="ch">|(</span><span class="st">59</span><span class="ch">|</span><span class="st">6</span><span class="ch">[</span><span class="st">0-9</span><span class="ch">]|</span><span class="st">7</span><span class="ch">[</span><span class="st">0-6</span><span class="ch">])</span><span class="st">in</span><span class="ch">)</span><span class="sc">\b</span><span class="st">"</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">r"hcl:#</span><span class="ch">[</span><span class="st">0-9a-f</span><span class="ch">]</span><span class="st">{6}</span><span class="sc">\b</span><span class="st">"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">r"ecl:</span><span class="ch">(</span><span class="st">amb</span><span class="ch">|</span><span class="st">blu</span><span class="ch">|</span><span class="st">brn</span><span class="ch">|</span><span class="st">gry</span><span class="ch">|</span><span class="st">grn</span><span class="ch">|</span><span class="st">hzl</span><span class="ch">|</span><span class="st">oth</span><span class="ch">)</span><span class="sc">\b</span><span class="st">"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">r"pid:</span><span class="sc">\d</span><span class="st">{9}</span><span class="sc">\b</span><span class="st">"</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">count</span>(p <span class="op">-&gt;</span> <span class="fu">all</span>(t <span class="op">-&gt;</span> <span class="fu">contains</span>(p, t), fields1), data)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">count</span>(p <span class="op">-&gt;</span> <span class="fu">all</span>(t <span class="op">-&gt;</span> <span class="fu">contains</span>(p, t), fields2), data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There were a lot of puzzles this year where I would have been able to parse the input more easily by knowing just a little bit more regex.</p>
</section>
<section id="day-5-binary-boarding" class="level3">
<h3 class="anchored" data-anchor-id="day-5-binary-boarding"><a href="https://adventofcode.com/2020/day/5">Day 5: Binary Boarding</a></h3>
<p>Sometimes having a little insight into what the problem is asking can go a long way. For example, in this puzzle, the seat ID is just a binary representation of the input.</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="88" height="192" class="svgbob">
  <style>.svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {
  stroke: black;
  stroke-width: 2;
  stroke-opacity: 1;
  fill-opacity: 1;
  stroke-linecap: round;
  stroke-linejoin: miter;
}

.svgbob text {
  white-space: pre;
  fill: black;
  font-family: Iosevka Fixed, monospace;
  font-size: 14px;
}

.svgbob rect.backdrop {
  stroke: none;
  fill: white;
}

.svgbob .broken {
  stroke-dasharray: 8;
}

.svgbob .filled {
  fill: black;
}

.svgbob .bg_filled {
  fill: white;
  stroke-width: 1;
}

.svgbob .nofill {
  fill: white;
}

.svgbob .end_marked_arrow {
  marker-end: url(#arrow);
}

.svgbob .start_marked_arrow {
  marker-start: url(#arrow);
}

.svgbob .end_marked_diamond {
  marker-end: url(#diamond);
}

.svgbob .start_marked_diamond {
  marker-start: url(#diamond);
}

.svgbob .end_marked_circle {
  marker-end: url(#circle);
}

.svgbob .start_marked_circle {
  marker-start: url(#circle);
}

.svgbob .end_marked_open_circle {
  marker-end: url(#open_circle);
}

.svgbob .start_marked_open_circle {
  marker-start: url(#open_circle);
}

.svgbob .end_marked_big_open_circle {
  marker-end: url(#big_open_circle);
}

.svgbob .start_marked_big_open_circle {
  marker-start: url(#big_open_circle);
}

</style>
  <defs>
    <marker id="arrow" viewbox="-2 -2 8 8" refx="4" refy="2" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <polygon points="0,0 0,4 4,2 0,0"></polygon>
    </marker>
    <marker id="diamond" viewbox="-2 -2 8 8" refx="4" refy="2" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
    </marker>
    <marker id="circle" viewbox="0 0 8 8" refx="4" refy="4" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <circle cx="4" cy="4" r="2" class="filled"></circle>
    </marker>
    <marker id="open_circle" viewbox="0 0 8 8" refx="4" refy="4" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
    </marker>
    <marker id="big_open_circle" viewbox="0 0 8 8" refx="4" refy="4" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
    </marker>
  </defs>
  <rect class="backdrop" x="0" y="0" width="88" height="192"></rect>
  <text x="2" y="12">FBFBBFFRLR</text>
  <line x1="36" y1="32" x2="36" y2="52" class="solid"></line>
  <polygon points="32,52 40,52 36,64" class="filled"></polygon>
  <text x="2" y="92">0101100101</text>
  <line x1="36" y1="112" x2="36" y2="132" class="solid"></line>
  <polygon points="32,132 40,132 36,144" class="filled"></polygon>
  <text x="26" y="172">357</text>
</svg>
</p>
<p>So you can calculate the seat ID using binary shifting or by converting the input to <code>1</code>s and <code>0</code>s and parsing the input as a binary number directly.</p>
<p>This solution is based on <a href="https://github.com/Arkoniak/advent_of_code/blob/c692bc20147362cfb373e1483cf73588489a597b/2020/05/day05.jl">Andrey Oskin’s</a>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seatid</span>(s) <span class="op">=</span> <span class="fu">reduce</span>((x, y) <span class="op">-&gt;</span> (x <span class="op">&lt;&lt;</span> <span class="fl">1</span>) <span class="op">|</span> ((y <span class="op">==</span> <span class="ch">'R'</span>) <span class="op">|</span> (y <span class="op">==</span> <span class="ch">'B'</span>)), s; init <span class="op">=</span> <span class="fl">0</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">seatid</span>(s) <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">Int</span>, <span class="fu">map</span>(c <span class="op">-&gt;</span> c <span class="op">∈</span> (<span class="ch">'R'</span>, <span class="ch">'B'</span>) ? <span class="ch">'1'</span> <span class="op">:</span> <span class="ch">'0'</span>, s), base <span class="op">=</span> <span class="fl">2</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>() <span class="op">=</span> <span class="fu">mapreduce</span>(seatid, max, <span class="fu">eachline</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>)))</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>()</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    seats <span class="op">=</span> <span class="fu">sort</span>(<span class="fu">seatid</span>.(<span class="fu">eachline</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>))))</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    prev <span class="op">=</span> <span class="fu">first</span>(seats)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> seat <span class="kw">in</span> seats</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        (seat <span class="op">-</span> prev <span class="op">==</span> <span class="fl">2</span>) <span class="op">&amp;&amp;</span> <span class="cf">return</span> prev <span class="op">+</span> <span class="fl">1</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        prev <span class="op">=</span> seat</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>eachline</code> function is an alternative to <code>readlines</code>. It iteratively reads from a stream or IO.</p>
</section>
<section id="day-6-custom-customs" class="level3">
<h3 class="anchored" data-anchor-id="day-6-custom-customs"><a href="https://adventofcode.com/2020/day/6">Day 6: Custom Customs</a></h3>
<p>Day 6 introduces set operations with the prompt asking you to identify <q>any</q> and <q>every</q> question, which can be expressed using <code>union</code> and <code>intersect</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">split</span>.(<span class="fu">split</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">sum</span>(q <span class="op">-&gt;</span> <span class="fu">length</span>(<span class="fu">∪</span>(<span class="fu">Set</span>.(q)<span class="op">...</span>)), data)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">sum</span>(q <span class="op">-&gt;</span> <span class="fu">length</span>(<span class="fu">∩</span>(<span class="fu">Set</span>.(q)<span class="op">...</span>)), data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In Julia, you can use the unicode symbols of mathematical operations for <code>union</code> and <code>intersect</code> of sets, namely <code>∪</code> and <code>∩</code> respectively. In the Julia REPL or text editors with Julia plugins, you can use the name and tab complete to get the unicode symbol.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="op">\</span>cup<span class="op">&lt;</span>TAB<span class="op">&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="op">∪</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>union (generic <span class="kw">function</span> with <span class="fl">5</span> methods)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="op">\</span>cap<span class="op">&lt;</span>TAB<span class="op">&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="op">∩</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>intersect (generic <span class="kw">function</span> with <span class="fl">19</span> methods)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Also, julia has methods on functions like <code>sum</code> that accept a function as the first argument, which is useful for mapping over every element in a collection.</p>
<p>The <code>...</code> operator can be used to splat elements from a collection into arguments of a function.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">f</span>(a, b, c) <span class="op">=</span> <span class="pp">@show</span> a, b, c;</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> x <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>];</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">f</span>(x<span class="op">...</span>);</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>(a, b, c) <span class="op">=</span> (<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="day-7-handy-haversacks" class="level3">
<h3 class="anchored" data-anchor-id="day-7-handy-haversacks"><a href="https://adventofcode.com/2020/day/7">Day 7: Handy Haversacks</a></h3>
<p>Day 7 is the first introduction to graphs this year. While it is possible to find solutions to both parts of this puzzle using recursion, the problem can be well represented as a graph.</p>
<p>This code is based on <a href="https://github.com/CNOT">Ali Hamed Moosavian’s</a> and <a href="https://github.com/Arkoniak/advent_of_code/blob/c692bc20147362cfb373e1483cf73588489a597b/2020/07/day07.jl">Andrey Oskin’s</a> solutions and visualizations:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LightGraphs</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">SimpleWeightedGraphs</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">build_graph</span>(<span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">build_graph</span>(data)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    edges <span class="op">=</span> []</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> data</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        outer_bag, inner_bags <span class="op">=</span> <span class="fu">split</span>(line, <span class="st">" contain "</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">occursin</span>(<span class="st">"no other bags"</span>, inner_bags) <span class="op">&amp;&amp;</span> <span class="cf">continue</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> bag <span class="kw">in</span> <span class="fu">split</span>(inner_bags, <span class="st">", "</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            counter, name <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">Int</span>, <span class="fu">first</span>(bag)), <span class="fu">strip</span>(bag[<span class="fl">3</span><span class="op">:</span><span class="kw">end</span>], <span class="ch">'.'</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>            <span class="cn">e</span> <span class="op">=</span> <span class="fu">String</span>(<span class="fu">rstrip</span>(outer_bag, <span class="ch">'s'</span>)), <span class="fu">String</span>(<span class="fu">rstrip</span>(name, <span class="ch">'s'</span>)), counter</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">push!</span>(edges, <span class="cn">e</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    nodes <span class="op">=</span> <span class="fu">collect</span>(<span class="fu">Set</span>(src <span class="cf">for</span> (src, _, _) <span class="kw">in</span> edges) <span class="op">∪</span> <span class="fu">Set</span>(dst <span class="cf">for</span> (_, dst, _) <span class="kw">in</span> edges))</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    mapping <span class="op">=</span> <span class="fu">Dict</span>(n <span class="op">=&gt;</span> i <span class="cf">for</span> (i,n) <span class="kw">in</span> <span class="fu">enumerate</span>(nodes))</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    g <span class="op">=</span> <span class="fu">SimpleWeightedDiGraph</span>(<span class="fu">length</span>(nodes))</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (src, dst, counter) <span class="kw">in</span> edges</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">add_edge!</span>(g, mapping[src], mapping[dst], counter)</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    g, mapping, nodes</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now that you have built a graph, you can find the solution by just traversing the graph.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">part1</span>(data[<span class="fl">1</span>], data[<span class="fl">2</span>])</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(g, mapping) <span class="op">=</span> <span class="fu">count</span>(<span class="op">!=</span>(<span class="fl">0</span>), <span class="fu">bfs_parents</span>(g, mapping[<span class="st">"shiny gold bag"</span>], dir <span class="op">=</span> <span class="op">:</span><span class="kw">in</span>)) <span class="op">-</span> <span class="fl">1</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">total_bags</span>(g, v)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">isempty</span>(<span class="fu">neighbors</span>(g, v)) <span class="op">&amp;&amp;</span> <span class="cf">return</span> <span class="fl">1</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="fl">1</span> <span class="op">+</span> <span class="fu">sum</span>(<span class="fu">neighbors</span>(g, v)) <span class="cf">do</span> nb</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">Int</span>(g.weights[nb, v]) <span class="op">*</span> <span class="fu">total_bags</span>(g, nb)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">part2</span>(data[<span class="fl">1</span>], data[<span class="fl">2</span>])</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(g, mapping) <span class="op">=</span> <span class="fu">total_bags</span>(g, mapping[<span class="st">"shiny gold bag"</span>]) <span class="op">-</span> <span class="fl">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="images/adventofcode-day07-part1.png" class="img-fluid" style="width:45.0%" alt="part1"> <img src="images/adventofcode-day07-part2.png" class="img-fluid" style="width:45.0%" alt="part2"></p>
<p>Julia allows for <a href="https://docs.julialang.org/en/v1/manual/methods/">multiple dispatch</a> based on the number of arguments and the type of each argument. This lets you define multiple methods of a function.</p>
</section>
<section id="day-8-handheld-halting" class="level3">
<h3 class="anchored" data-anchor-id="day-8-handheld-halting"><a href="https://adventofcode.com/2020/day/8">Day 8: Handheld Halting</a></h3>
<p>Day 8 appears to be a straightforward op code interpreter.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">boot</span>(<span class="fu">split</span>(data, <span class="ch">'\n'</span>))</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">corrupt</span>(<span class="fu">split</span>(data, <span class="ch">'\n'</span>))</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">boot</span>(instructions)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    acc, i, s <span class="op">=</span> <span class="fl">0</span>, <span class="fl">1</span>, <span class="fu">Set</span><span class="dt">{Int}</span>()</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="cn">true</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        i <span class="op">∈</span> s ? <span class="cf">break</span> <span class="op">:</span> <span class="fu">push!</span>(s, i)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        inst, n <span class="op">=</span> <span class="fu">split</span>(instructions[i])</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">Int</span>, n)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        inst <span class="op">==</span> <span class="st">"acc"</span> <span class="op">&amp;&amp;</span> ( i <span class="op">+=</span> <span class="fl">1</span>; acc <span class="op">+=</span> n )</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        inst <span class="op">==</span> <span class="st">"jmp"</span> <span class="op">&amp;&amp;</span> ( i <span class="op">+=</span> n )</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        inst <span class="op">==</span> <span class="st">"nop"</span> <span class="op">&amp;&amp;</span> ( i <span class="op">+=</span> <span class="fl">1</span> )</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    acc</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">corrupt</span>(original_instructions)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(original_instructions)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>        boot_loop_detected <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        acc, i, s <span class="op">=</span> <span class="fl">0</span>, <span class="fl">1</span>, <span class="fu">Set</span><span class="dt">{Int}</span>()</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>        instructions <span class="op">=</span> <span class="fu">copy</span>(original_instructions)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="fu">occursin</span>(<span class="st">"jmp"</span>, instructions[j])</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>            instructions[j] <span class="op">=</span> <span class="fu">replace</span>(instructions[j], <span class="st">"jmp"</span> <span class="op">=&gt;</span> <span class="st">"nop"</span>)</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> <span class="fu">occursin</span>(<span class="st">"nop"</span>, instructions[j])</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>            instructions[j] <span class="op">=</span> <span class="fu">replace</span>(instructions[j], <span class="st">"nop"</span> <span class="op">=&gt;</span> <span class="st">"jmp"</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="cn">true</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>            i <span class="op">∈</span> s ? ( boot_loop_detected <span class="op">=</span> <span class="cn">true</span>; <span class="cf">break</span> ) <span class="op">:</span> <span class="fu">push!</span>(s, i)</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>            i <span class="op">&gt;</span> <span class="fu">length</span>(instructions) <span class="op">&amp;&amp;</span> <span class="cf">break</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>            inst, n <span class="op">=</span> <span class="fu">split</span>(instructions[i])</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>            n <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">Int</span>, n)</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>            inst <span class="op">==</span> <span class="st">"acc"</span> <span class="op">&amp;&amp;</span> ( i <span class="op">+=</span> <span class="fl">1</span>; acc <span class="op">+=</span> n )</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>            inst <span class="op">==</span> <span class="st">"jmp"</span> <span class="op">&amp;&amp;</span> ( i <span class="op">+=</span> n )</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>            inst <span class="op">==</span> <span class="st">"nop"</span> <span class="op">&amp;&amp;</span> ( i <span class="op">+=</span> <span class="fl">1</span> )</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>        !boot_loop_detected <span class="op">&amp;&amp;</span> <span class="cf">return</span> acc</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I believe this problem can also be represented as a graph and solved using memoized depth first search. I would like to re-write this solution using <a href="https://github.com/JuliaGraphs/LightGraphs.jl"><code>LightGraphs.jl</code></a>.</p>
</section>
<section id="day-9-encoding-error" class="level3">
<h3 class="anchored" data-anchor-id="day-9-encoding-error"><a href="https://adventofcode.com/2020/day/9">Day 9: Encoding Error</a></h3>
<p>Day 9 was also straightforward.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">check</span>(numbers, n)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> numbers, j <span class="kw">in</span> numbers</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+</span> j <span class="op">==</span> n <span class="op">&amp;&amp;</span> <span class="cf">return</span> <span class="cn">true</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="cn">false</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(numbers <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    preamble <span class="op">=</span> <span class="fl">25</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> (preamble <span class="op">+</span> <span class="fl">1</span>)<span class="op">:</span><span class="fu">length</span>(numbers)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">check</span>(numbers[i<span class="op">-</span>preamble<span class="op">:</span>i<span class="op">-</span><span class="fl">1</span>], numbers[i]) <span class="op">&amp;&amp;</span> <span class="cf">continue</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> i, numbers[i]</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(numbers <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    idx, num <span class="op">=</span> <span class="fu">part1</span>(numbers)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fu">eachindex</span>(numbers), j <span class="kw">in</span> i<span class="op">:</span><span class="fu">lastindex</span>(numbers)</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sum</span>(numbers[i<span class="op">:</span>j]) <span class="op">==</span> num <span class="op">&amp;&amp;</span> <span class="cf">return</span> <span class="fu">sum</span>(<span class="fu">extrema</span>(numbers[i<span class="op">:</span>j]))</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Julia has a function called <code>extrema</code> that computes the minimum and maximum element in a single pass.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="fu">extrema</span>([<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>])</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>(<span class="fl">1</span>, <span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="https://github.com/Teo-ShaoWei">Teo ShaoWei</a>’s solution using <a href="https://github.com/JuliaMath/Combinatorics.jl">Combinatorics.jl</a> is also quite elegant.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Combinatorics</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>))</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">bad_number</span>(nums, k)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> (k <span class="op">+</span> <span class="fl">1</span>)<span class="op">:</span><span class="fu">length</span>(nums)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> !<span class="fu">any</span>(num1 <span class="op">+</span> num2 <span class="op">==</span> nums[i] <span class="cf">for</span> (num1, num2) <span class="kw">in</span> <span class="fu">combinations</span>(nums[i<span class="op">-</span>k<span class="op">:</span>i<span class="op">-</span><span class="fl">1</span>], <span class="fl">2</span>))</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> (i, nums[i])</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">rectify</span>(nums, k)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    v <span class="op">=</span> <span class="fu">bad_number</span>(nums, k)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> j <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (s <span class="op">=</span> <span class="fu">sum</span>(nums[i<span class="op">:</span>j])) <span class="op">!=</span> v</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>        s <span class="op">&lt;</span> v ? j <span class="op">+=</span> <span class="fl">1</span> <span class="op">:</span> i <span class="op">+=</span> <span class="fl">1</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">minimum</span>(nums[i<span class="op">:</span>j]) <span class="op">+</span> <span class="fu">maximum</span>(nums[i<span class="op">:</span>j])</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>input <span class="op">=</span> <span class="fu">readInput</span>()</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>part1 <span class="op">=</span> <span class="fu">bad_number</span>(input, <span class="fl">25</span>)</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>part2 <span class="op">=</span> <span class="fu">rectify</span>(input, <span class="fl">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="day-10-adapter-array" class="level3">
<h3 class="anchored" data-anchor-id="day-10-adapter-array"><a href="https://adventofcode.com/2020/day/10">Day 10: Adapter Array</a></h3>
<p>Part 2 on this day asks to find the number of distinct ways to arrange the Jolt adapters to connect the charging outlet to the device.</p>
<p>This problem can be formulated as a dynamic programming problem. This is most straightforward to solve using recursion and memoization. Here’s <a href="https://github.com/tk3369/AdventOfCode2020/blob/1273e4a086832c5c159fe460f533016fedb33ab2/day10.jl">Tom Kwong’s</a> solution:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">readInput</span>()</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>)) <span class="op">|&gt;</span> sort</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">vcat</span>(<span class="fl">0</span>, data, data[<span class="kw">end</span>]<span class="op">+</span><span class="fl">3</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">count</span>(<span class="op">==</span>(<span class="fl">1</span>), <span class="fu">diff</span>(data)) <span class="op">*</span> <span class="fu">count</span>(<span class="op">==</span>(<span class="fl">3</span>), <span class="fu">diff</span>(data))</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    len <span class="op">=</span> <span class="fu">length</span>(data)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    dct <span class="op">=</span> <span class="fu">Dict</span><span class="dt">{Int,Int}</span>()</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">helper</span>(v, i)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">haskey</span>(dct, i) <span class="op">&amp;&amp;</span> <span class="cf">return</span> dct[i]</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        i <span class="op">==</span> len <span class="op">&amp;&amp;</span> <span class="cf">return</span> <span class="fl">1</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        n1 <span class="op">=</span>               v[i<span class="op">+</span><span class="fl">1</span>] <span class="op">-</span> v[i] <span class="op">&lt;=</span> <span class="fl">3</span> ? <span class="fu">helper</span>(v, i<span class="op">+</span><span class="fl">1</span>) <span class="op">:</span> <span class="fl">0</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        n2 <span class="op">=</span> i<span class="op">+</span><span class="fl">2</span> <span class="op">&lt;=</span> len <span class="op">&amp;&amp;</span> v[i<span class="op">+</span><span class="fl">2</span>] <span class="op">-</span> v[i] <span class="op">&lt;=</span> <span class="fl">3</span> ? <span class="fu">helper</span>(v, i<span class="op">+</span><span class="fl">2</span>) <span class="op">:</span> <span class="fl">0</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>        n3 <span class="op">=</span> i<span class="op">+</span><span class="fl">3</span> <span class="op">&lt;=</span> len <span class="op">&amp;&amp;</span> v[i<span class="op">+</span><span class="fl">3</span>] <span class="op">-</span> v[i] <span class="op">&lt;=</span> <span class="fl">3</span> ? <span class="fu">helper</span>(v, i<span class="op">+</span><span class="fl">3</span>) <span class="op">:</span> <span class="fl">0</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> n1 <span class="op">+</span> n2 <span class="op">+</span> n3</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>        dct[i] <span class="op">=</span> val</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> val</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">helper</span>(data, <span class="fl">1</span>)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>One key insight here is that the data doesn’t contain jolt adapters that are only 1 or 3 apart.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> StatsBase.<span class="fu">countmap</span>(<span class="fu">diff</span>(<span class="fu">readInput</span>()))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Dict</span>{<span class="dt">Int64</span>, <span class="dt">Int64</span>} with <span class="fl">2</span> entries<span class="op">:</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fl">3</span> <span class="op">=&gt;</span> <span class="fl">32</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fl">1</span> <span class="op">=&gt;</span> <span class="fl">71</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Since any adapter that is 3 away can’t be removed, the number of distinct ways is just the product of all the different ways you can choose two adapters from the set of 1 away adapters that are in between the 3 away adapters. Here’s a solution based on <a href="https://github.com/jonniedie/Advent2020/blob/dd722991120aa79cf4e0ec028612fb0c48d7d54c/scripts/Day10/code.jl">Jonnie Diegelman’s</a> that takes advantage of that:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">readInput</span>()</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>)) <span class="op">|&gt;</span> sort</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">vcat</span>(<span class="fl">0</span>, data, data[<span class="kw">end</span>]<span class="op">+</span><span class="fl">3</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">join</span>(<span class="fu">string</span>.(<span class="fu">diff</span>(data)))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">count</span>(<span class="op">==</span>(<span class="ch">'1'</span>), data) <span class="op">*</span> <span class="fu">count</span>(<span class="op">==</span>(<span class="ch">'3'</span>), data)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">prod</span>(<span class="fu">binomial</span>.(<span class="fu">length</span>.(<span class="fu">split</span>(data, <span class="ch">'3'</span>, keepempty<span class="op">=</span><span class="cn">false</span>)), <span class="fl">2</span>) <span class="op">.+</span> <span class="fl">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This only works however when the set of 1 away adapters is not longer than 5 elements, which is the case in our puzzle inputs.</p>
<p>Alternatively, because the steps needed are one, two or three, you can calculate all possible steps by using a tribonacci sum. The tribonacci sum gives us all ways to traverse a set of ones, i.e.&nbsp;<code>11111...</code> by hopping from <code>1</code> to <code>1</code> in steps of size 1, 2 or 3.</p>
<p>Thanks to <a href="https://github.com/Seelengrab/AdventOfCode">Sukera</a> and <a href="https://github.com/Arkoniak/advent_of_code/blob/master/2020/10/day10.jl">Andrey Oskin</a> for their code and insight into solving this puzzle.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">readInput</span>()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>)) <span class="op">|&gt;</span> sort</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">vcat</span>(<span class="fl">0</span>, data, data[<span class="kw">end</span>]<span class="op">+</span><span class="fl">3</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">split</span>(<span class="fu">join</span>(<span class="fu">string</span>.(<span class="fu">diff</span>(data))), <span class="ch">'3'</span>, keepempty <span class="op">=</span> <span class="cn">false</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">tribonacci</span>(n)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    n <span class="op">&lt;=</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="cf">return</span> <span class="fl">1</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    n <span class="op">==</span> <span class="fl">2</span> <span class="op">&amp;&amp;</span> <span class="cf">return</span> <span class="fl">2</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tribonacci</span>(n<span class="op">-</span><span class="fl">1</span>) <span class="op">+</span> <span class="fu">tribonacci</span>(n<span class="op">-</span><span class="fl">2</span>) <span class="op">+</span> <span class="fu">tribonacci</span>(n<span class="op">-</span><span class="fl">3</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">prod</span>(<span class="fu">tribonacci</span>.(<span class="fu">length</span>.(data)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The tribonacci sequence can also be generalized:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> a1 <span class="op">=</span> (<span class="fl">19</span> <span class="op">+</span> <span class="fl">3</span><span class="fu">sqrt</span>(<span class="fl">33</span>))<span class="op">^</span>(<span class="fl">1</span><span class="op">/</span><span class="fl">3</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> a2 <span class="op">=</span> (<span class="fl">19</span> <span class="op">-</span> <span class="fl">3</span><span class="fu">sqrt</span>(<span class="fl">33</span>))<span class="op">^</span>(<span class="fl">1</span><span class="op">/</span><span class="fl">3</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> b <span class="op">=</span> (<span class="fl">586</span> <span class="op">+</span> <span class="fl">102</span><span class="fu">sqrt</span>(<span class="fl">33</span>))<span class="op">^</span>(<span class="fl">1</span><span class="op">/</span><span class="fl">3</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tribonacci</span>(n) <span class="op">=</span> <span class="fu">round</span>(<span class="dt">Int</span>, (<span class="fl">3</span>b <span class="op">*</span> (<span class="fl">1</span><span class="op">/</span><span class="fl">3</span> <span class="op">*</span> (a1 <span class="op">+</span> a2 <span class="op">+</span> <span class="fl">1</span>))<span class="op">^</span>(n <span class="op">+</span> <span class="fl">1</span>))<span class="op">/</span>(b<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> <span class="fl">2</span>b <span class="op">+</span> <span class="fl">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>See the <a href="https://en.wikipedia.org/wiki/Generalizations_of_Fibonacci_numbers#Tribonacci_numbers">Wikipedia</a> article for more information.</p>
</section>
<section id="day-11-seating-system" class="level3">
<h3 class="anchored" data-anchor-id="day-11-seating-system"><a href="https://adventofcode.com/2020/day/11">Day 11: Seating System</a></h3>
<p>This is the first tribute in Advent of Code 2020 to <a href="https://en.wikipedia.org/wiki/John_Horton_Conway">John Conway</a>, who passed away earlier this year. John Conway was an English mathematician, most notably famous for the invention of the cellular automation called the <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Game of Life</a>.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">permutedims</span>(<span class="fu">reduce</span>(hcat, <span class="fu">collect</span>.(<span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>))))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">simulate</span>(data, <span class="fl">0</span>, <span class="fl">1</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">simulate</span>(data, <span class="fl">1</span>, <span class="fu">size</span>(data, <span class="fl">1</span>) <span class="op">*</span> <span class="fl">2</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">simulate</span>(grid, company, sight)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="cn">true</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        old_grid <span class="op">=</span> <span class="fu">deepcopy</span>(grid)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tick</span>(grid, company, sight)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>        grid <span class="op">==</span> old_grid <span class="op">&amp;&amp;</span> <span class="cf">break</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="op">==</span>(<span class="ch">'#'</span>), grid)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">tick</span>(grid, company, sight)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    rows, cols <span class="op">=</span> <span class="fu">size</span>(grid)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    old_grid <span class="op">=</span> <span class="fu">deepcopy</span>(grid)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> r <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>rows, c <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>cols</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>        A <span class="op">=</span> <span class="fu">adjacent_seats</span>(old_grid, r, c, sight)</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>        grid[r, c] <span class="op">==</span> <span class="ch">'L'</span> <span class="op">&amp;&amp;</span> <span class="fu">count</span>(<span class="op">==</span>(<span class="ch">'#'</span>), A) <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> ( grid[r, c] <span class="op">=</span> <span class="ch">'#'</span> )</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>        grid[r, c] <span class="op">==</span> <span class="ch">'#'</span> <span class="op">&amp;&amp;</span> <span class="fu">count</span>(<span class="op">==</span>(<span class="ch">'#'</span>), A) <span class="op">&gt;=</span> <span class="fl">4</span> <span class="op">+</span> company <span class="op">&amp;&amp;</span> ( grid[r, c] <span class="op">=</span> <span class="ch">'L'</span> )</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">adjacent_seats</span>(grid, i, j, sight)</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    A <span class="op">=</span> []</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> direction <span class="kw">in</span> <span class="fu">CartesianIndex</span>.([(<span class="op">-</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>), (<span class="op">-</span><span class="fl">1</span>,<span class="op">+</span><span class="fl">1</span>), (<span class="op">+</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>), (<span class="op">+</span><span class="fl">1</span>, <span class="op">+</span><span class="fl">1</span>), (<span class="op">-</span><span class="fl">1</span>,<span class="fl">0</span>), (<span class="op">+</span><span class="fl">1</span>,<span class="fl">0</span>), (<span class="fl">0</span>,<span class="op">-</span><span class="fl">1</span>), (<span class="fl">0</span>,<span class="op">+</span><span class="fl">1</span>)])</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>        xy <span class="op">=</span> <span class="fu">CartesianIndex</span>(i, j) <span class="op">+</span> direction</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>        counter <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="fu">checkbounds</span>(<span class="dt">Bool</span>, grid, xy) <span class="op">&amp;&amp;</span> grid[xy] <span class="op">==</span> <span class="ch">'.'</span> <span class="op">&amp;&amp;</span> counter <span class="op">&lt;</span> sight</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>            xy <span class="op">+=</span> direction</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>            counter <span class="op">+=</span> <span class="fl">1</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>        <span class="fu">checkbounds</span>(<span class="dt">Bool</span>, grid, xy) <span class="op">&amp;&amp;</span> <span class="fu">push!</span>(A, grid[xy])</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    A</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The key thing to remember when implementing cellular automata is to copy the grid at each tick.</p>
<p>Julia’s <code>CartesianIndex</code> makes it easier to deal with multi-dimensional indexing. Additionally, I found the <code>checkbounds</code> function quite handy for this problem.</p>
</section>
<section id="day-12-rain-risk" class="level3">
<h3 class="anchored" data-anchor-id="day-12-rain-risk"><a href="https://adventofcode.com/2020/day/12">Day 12: Rain Risk</a></h3>
<p>This was one of my better performances on the Julia leaderboard. Using complex numbers makes it quite straightforward to deal with problems involving rotation.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">map</span>(data) <span class="cf">do</span> d</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">first</span>(d), <span class="fu">parse</span>(<span class="dt">Int</span>, d[begin<span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="kw">end</span>])</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> <span class="fl">0</span> <span class="op">+</span> <span class="fl">0im</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    direction <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">0im</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (action, move) <span class="kw">in</span> data</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>     action <span class="op">==</span> <span class="ch">'N'</span> current <span class="op">+=</span> move <span class="op">*</span> <span class="cn">im</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'S'</span> current <span class="op">-=</span> move <span class="op">*</span> <span class="cn">im</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'E'</span> current <span class="op">+=</span> move</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'W'</span> current <span class="op">-=</span> move</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'F'</span> current <span class="op">+=</span> direction <span class="op">*</span> move</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'L'</span> direction <span class="op">*=</span> <span class="cn">im</span><span class="op">^</span>(move <span class="op">÷</span> <span class="fl">90</span>)</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'R'</span> direction <span class="op">*=</span> (<span class="op">-</span><span class="cn">im</span>)<span class="op">^</span>(move <span class="op">÷</span> <span class="fl">90</span>)</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>   <span class="fu">error</span>(<span class="st">"Unrecognized </span><span class="sc">$</span>action<span class="st">, </span><span class="sc">$</span>move<span class="st">"</span>) <span class="cf">end</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abs</span>(current.re) <span class="op">+</span> <span class="fu">abs</span>(current.<span class="cn">im</span>)</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">map</span>(data) <span class="cf">do</span> d</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">first</span>(d), <span class="fu">parse</span>(<span class="dt">Int</span>, d[begin<span class="op">+</span><span class="fl">1</span><span class="op">:</span><span class="kw">end</span>])</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    waypoint <span class="op">=</span> <span class="fl">10</span> <span class="op">+</span> <span class="fl">1im</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> <span class="fl">0</span> <span class="op">+</span> <span class="fl">0im</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    direction <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">0im</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (action, move) <span class="kw">in</span> data</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>     action <span class="op">==</span> <span class="ch">'N'</span> waypoint <span class="op">+=</span> move <span class="op">*</span> <span class="cn">im</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'S'</span> waypoint <span class="op">-=</span> move <span class="op">*</span> <span class="cn">im</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'E'</span> waypoint <span class="op">+=</span> move</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'W'</span> waypoint <span class="op">-=</span> move</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'F'</span> current <span class="op">+=</span> waypoint <span class="op">*</span> move</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'L'</span> waypoint <span class="op">*=</span> <span class="cn">im</span><span class="op">^</span>(move <span class="op">÷</span> <span class="fl">90</span>)</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> action <span class="op">==</span> <span class="ch">'R'</span> waypoint <span class="op">*=</span> (<span class="op">-</span><span class="cn">im</span>)<span class="op">^</span>(move <span class="op">÷</span> <span class="fl">90</span>)</span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>   <span class="fu">error</span>(<span class="st">"Unrecognized </span><span class="sc">$</span>action<span class="st">, </span><span class="sc">$</span>move<span class="st">"</span>) <span class="cf">end</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abs</span>(current.re) <span class="op">+</span> <span class="fu">abs</span>(current.<span class="cn">im</span>)</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Thanks to <a href="https://github.com/cmcaine/advent2020/blob/aae90d873af5a7ce870a1e0bb0355b598ee389fe/src/day12.jl">Colin Caine</a> for suggesting using <code>if ... elseif ... end</code> for minor performance improvements. Check out his other solutions for more optimized takes on the problems.</p>
<p><a href="https://github.com/mkborregaard">Michael Krabbe Borregaard</a> had some neat visualizations for this day.</p>
<p><img src="images/adventofcode-day12-part1.png" class="img-fluid" style="width:45.0%" alt="part1"> <img src="images/adventofcode-day12-part2.png" class="img-fluid" style="width:45.0%" alt="part2"></p>
</section>
<section id="day-13-shuttle-search" class="level3">
<h3 class="anchored" data-anchor-id="day-13-shuttle-search"><a href="https://adventofcode.com/2020/day/13">Day 13: Shuttle Search</a></h3>
<p>This was one of the harder days for me. I had never heard of <a href="https://en.wikipedia.org/wiki/Chinese_remainder_theorem">Chinese Remainder Theorem</a> (CRT) and apparently that’s what this problem was based on.</p>
<p>Here’s a solution by <a href="https://git.mehalter.com/mehalter/AOC.jl/src/commit/e65eccac7e3825d5d9706b18e1fe244958f5f1e8/2020/src/day_13.jl">Micah Halter</a> that uses the <code>CRT</code> function from <a href="https://github.com/scheinerman/Mods.jl">Mods.jl</a> package.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Mods</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">readInput</span>()</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    t_str, buses_str <span class="op">=</span> <span class="fu">readlines</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>))</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    time <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">Int</span>, t_str)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    buses <span class="op">=</span> <span class="fu">map</span>(x<span class="op">-&gt;</span>x<span class="op">==</span><span class="st">"x"</span> ? <span class="cn">nothing</span> <span class="op">:</span> <span class="fu">parse</span>(<span class="dt">Int</span>, x), <span class="fu">split</span>(buses_str, <span class="ch">','</span>))</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    time, buses</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    time, buses <span class="op">=</span> data</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    wait, bus <span class="op">=</span> <span class="fu">min</span>(<span class="fu">map</span>(<span class="fu">x-&gt;</span>(<span class="fu">x*ceil</span>(time <span class="op">/</span> x), x), <span class="fu">filter</span>(!isnothing, buses))<span class="op">...</span>)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    (wait <span class="op">-</span> time) <span class="op">*</span> bus</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    _, buses <span class="op">=</span> data</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    mods <span class="op">=</span> <span class="fu">map</span>(<span class="fu">k-&gt;Mod</span><span class="dt">{buses[k]}</span>(<span class="fu">-</span>(k<span class="op">-</span><span class="fl">1</span>)), <span class="fu">filter</span>(<span class="fu">k-&gt;!isnothing</span>(buses[k]), <span class="fu">keys</span>(buses)))</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">CRT</span>(mods<span class="op">...</span>).val</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here’s another solution from <a href="https://github.com/dgkf/advent-of-code/blob/98ee142a61b453a766331c65ece372978041935e/2020/13/13.jl">Doug</a> that finds the cycles using <code>lcm</code> much more elegantly than how I ended up doing it. The key bit of insight here is that the <code>lcm(previous_bus_schedules, new_bus_schedule)</code> will be the cycle at which the pattern repeats. Using this, you can break the problem down by iteratively and calculate the next cycle.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">readInput</span>()</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    input <span class="op">=</span> <span class="fu">readlines</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">Int</span>, input[<span class="fl">1</span>])</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    schedule <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">replace</span>(<span class="fu">split</span>(input[<span class="fl">2</span>], <span class="st">","</span>), <span class="st">"x"</span> <span class="op">=&gt;</span> <span class="st">"-1"</span>))</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    bus_n <span class="op">=</span> <span class="fu">filter</span>(<span class="op">!=</span>(<span class="op">-</span><span class="fl">1</span>), schedule)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    bus_dt <span class="op">=</span> (<span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(schedule))[schedule <span class="op">.!=</span> <span class="op">-</span><span class="fl">1</span>] <span class="op">.-</span> <span class="fl">1</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    bus_n, bus_dt, n</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    bus_n, bus_dt, n <span class="op">=</span> data</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    min_rem, min_rem_i <span class="op">=</span> <span class="fu">findmin</span>(bus_n <span class="op">.-</span> n <span class="op">.%</span> bus_n)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    bus_n[min_rem_i] <span class="op">*</span> min_rem</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    bus_n, bus_dt, n <span class="op">=</span> data</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    inc <span class="op">=</span> bus_n[<span class="fl">1</span>]</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i, offset) <span class="kw">in</span> <span class="fu">zip</span>(bus_n[<span class="fl">2</span><span class="op">:</span><span class="kw">end</span>], bus_dt[<span class="fl">2</span><span class="op">:</span><span class="kw">end</span>])</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> (n <span class="op">+</span> offset) <span class="op">%</span> i <span class="op">!=</span> <span class="fl">0</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>            n <span class="op">+=</span> inc</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>        inc <span class="op">=</span> <span class="fu">lcm</span>(inc, i)</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="day-14-docking-data" class="level3">
<h3 class="anchored" data-anchor-id="day-14-docking-data"><a href="https://adventofcode.com/2020/day/14">Day 14: Docking Data</a></h3>
<p>This puzzle requires dealing with bit shifting and masking of bits.</p>
<p>Here’s <a href="https://github.com/pabloferz/AoC/">Pablo Zubieta’s</a> solution:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">parse_mask_ops</span>(line)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    mask, list <span class="op">=</span> <span class="fu">split</span>(line, <span class="st">r"</span><span class="sc">\n</span><span class="st">"</span>; limit <span class="op">=</span> <span class="fl">2</span>, keepempty <span class="op">=</span> <span class="cn">false</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    instructions <span class="op">=</span> <span class="dt">Tuple</span>{<span class="dt">Int</span>,<span class="dt">Int</span>}[]</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> m <span class="kw">in</span> <span class="fu">eachmatch</span>(<span class="st">r"mem</span><span class="sc">.</span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="sc">.</span><span class="st"> = </span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">"</span>, list)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        address, n <span class="op">=</span> m.captures</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">push!</span>(instructions, (<span class="fu">parse</span>(<span class="dt">Int</span>, address), <span class="fu">parse</span>(<span class="dt">Int</span>, n)))</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mask, instructions</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">parse_mask_ops</span>.(<span class="fu">split</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>), <span class="st">r"mask = "</span>; keepempty <span class="op">=</span> <span class="cn">false</span>))</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Part1 <span class="kw">end</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Part2 <span class="kw">end</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">write!</span>(<span class="op">::</span><span class="dt">Part1</span>, memory, mask, addr, n)</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i, bit) <span class="kw">in</span> <span class="fu">enumerate</span>(mask)</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> bit <span class="op">!=</span> <span class="ch">'X'</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>            m <span class="op">=</span> <span class="fl">1</span> <span class="op">&lt;&lt;</span> (<span class="fl">36</span> <span class="op">-</span> i)</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>            n <span class="op">=</span> (bit <span class="op">==</span> <span class="ch">'1'</span>) ? (n <span class="op">|</span> m) <span class="op">:</span> (n <span class="op">&amp;</span> <span class="op">~</span>m)</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>    memory[addr] <span class="op">=</span> n</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">write!</span>(<span class="op">::</span><span class="dt">Part2</span>, memory, mask, addr, n)</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>    inds <span class="op">=</span> <span class="dt">Int8</span>[]</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i, bit) <span class="kw">in</span> <span class="fu">enumerate</span>(mask)</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> bit <span class="op">==</span> <span class="ch">'1'</span></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>            addr <span class="op">|=</span> (<span class="fl">1</span> <span class="op">&lt;&lt;</span> (<span class="fl">36</span> <span class="op">-</span> i))</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> bit <span class="op">==</span> <span class="ch">'X'</span></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>            <span class="fu">push!</span>(inds, i)</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>    l <span class="op">=</span> <span class="fu">length</span>(inds)</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> p <span class="kw">in</span> <span class="fl">0</span><span class="op">:</span>(<span class="fl">2</span><span class="op">^</span>l <span class="op">-</span> <span class="fl">1</span>)</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (k, i) <span class="kw">in</span> <span class="fu">enumerate</span>(inds)</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>            m <span class="op">=</span> <span class="fl">1</span> <span class="op">&lt;&lt;</span> (<span class="fl">36</span> <span class="op">-</span> i)</span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>            b <span class="op">=</span> (p <span class="op">&gt;&gt;</span> (l <span class="op">-</span> k)) <span class="op">&amp;</span> <span class="fl">1</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>            addr <span class="op">=</span> b <span class="op">!=</span> <span class="fl">0</span> ? (addr <span class="op">|</span> m) <span class="op">:</span> (addr <span class="op">&amp;</span> <span class="op">~</span>m)</span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>        memory[addr] <span class="op">=</span> n</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">solve</span>(p<span class="op">::</span><span class="dt">Union{Part1,Part2}</span>, input)</span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a>    memory <span class="op">=</span> <span class="fu">Dict</span><span class="dt">{Int,Int}</span>()</span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (mask, list) <span class="kw">in</span> input</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (address, n) <span class="kw">in</span> list</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>            <span class="fu">write!</span>(p, memory, mask, address, n)</span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">sum</span>(<span class="fu">values</span>(memory))</span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">solve</span>(<span class="fu">Part1</span>(), data)</span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">solve</span>(<span class="fu">Part2</span>(), data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I liked this solution because it was clean <em>and</em> fast:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="pp">@btime</span> <span class="fu">part1</span>();</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fl">392.104</span> μs (<span class="fl">2987</span> allocations<span class="op">:</span> <span class="fl">251.47</span> KiB)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="pp">@btime</span> <span class="fu">part2</span>();</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fl">5.218</span> ms (<span class="fl">4426</span> allocations<span class="op">:</span> <span class="fl">5.96</span> MiB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For comparison, these were the times from my original solution:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="pp">@btime</span> <span class="fu">part1</span>();</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fl">2.860</span> ms (<span class="fl">75635</span> allocations<span class="op">:</span> <span class="fl">4.77</span> MiB)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="pp">@btime</span> <span class="fu">part2</span>();</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fl">287.836</span> ms (<span class="fl">6234948</span> allocations<span class="op">:</span> <span class="fl">319.65</span> MiB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are more optimized solutions though, for example here are the timings for <a href="https://github.com/cmcaine/advent2020/blob/aae90d873af5a7ce870a1e0bb0355b598ee389fe/src/day14.jl">the solution posted by Colin Caine</a>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="pp">@btime</span> <span class="fu">part1</span>();</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fl">25.614</span> μs (<span class="fl">14</span> allocations<span class="op">:</span> <span class="fl">23.98</span> KiB)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="pp">@btime</span> <span class="fu">part2</span>();</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fl">3.354</span> ms (<span class="fl">41</span> allocations<span class="op">:</span> <span class="fl">5.67</span> MiB)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span> <span class="pp">@btime</span> <span class="fu">part2a</span>();</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fl">2.865</span> ms (<span class="fl">37</span> allocations<span class="op">:</span> <span class="fl">5.67</span> MiB)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="day-15-rambunctious-recitation" class="level3">
<h3 class="anchored" data-anchor-id="day-15-rambunctious-recitation"><a href="https://adventofcode.com/2020/day/15">Day 15: Rambunctious Recitation</a></h3>
<p>This puzzle seemed to mainly focus on choosing the right data structure for the <code>history</code> of the memory game. Storing it as a mapping of number to list of indices works well for both parts. A mapping of indices to number will cause the code to be slow, and will make solving part 2 impractical.</p>
<p>Here’s a solution by <a href="https://github.com/Seelengrab/">Sukera</a>:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">readline</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>)), <span class="ch">','</span>))</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">makeArr</span>() <span class="op">=</span> <span class="dt">Int</span>[]</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">solve</span>(input, goal<span class="op">=</span><span class="fl">2020</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    history <span class="op">=</span> <span class="fu">Dict</span><span class="dt">{Int, Vector{Int}}</span>()</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (idx, num) <span class="kw">in</span> <span class="fu">enumerate</span>(input)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>        history[num] <span class="op">=</span> [idx]</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    turn <span class="op">=</span> <span class="fu">length</span>(input) <span class="op">+</span> <span class="fl">1</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    num <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> turn<span class="op">:</span>goal<span class="op">-</span><span class="fl">1</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>        arr <span class="op">=</span> <span class="fu">get!</span>(history, num, <span class="fu">makeArr</span>())</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">push!</span>(arr, t)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="fu">isone</span>(<span class="fu">length</span>(arr))</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>            num <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>            num <span class="op">=</span> <span class="fu">abs</span>(arr[<span class="kw">end</span><span class="op">-</span><span class="fl">1</span>] <span class="op">-</span> arr[<span class="kw">end</span>])</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    num</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">solve</span>(data)</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">solve</span>(data, <span class="fl">30000000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This video is worth checking out too:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/etMJxB-igrc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
</section>
<section id="day-16-ticket-translation" class="level3">
<h3 class="anchored" data-anchor-id="day-16-ticket-translation"><a href="https://adventofcode.com/2020/day/16">Day 16: Ticket Translation</a></h3>
<p>Calculating which fields were invalid for part 1 was rather straightforward.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">readInput</span>()</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>))</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    rules, your_ticket, nearby_tickets <span class="op">=</span> <span class="fu">split</span>(data, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    rules <span class="op">=</span> <span class="fu">Dict</span>(<span class="fu">map</span>(<span class="fu">split</span>(rules, <span class="ch">'\n'</span>)) <span class="cf">do</span> rule</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>        rule, r1start, r1end, r2start, r2end <span class="op">=</span> <span class="fu">match</span>(<span class="st">r"</span><span class="ch">([</span><span class="sc">\w</span><span class="st"> </span><span class="ch">]</span><span class="sc">+</span><span class="ch">)</span><span class="st">: </span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">-</span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st"> or </span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">-</span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">"</span>, rule)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>        r1start, r1end, r2start, r2end <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, [r1start, r1end, r2start, r2end])</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        rule <span class="op">=&gt;</span> (r1start<span class="op">:</span>r1end, r2start<span class="op">:</span>r2end)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span>)</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    your_ticket <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">split</span>(your_ticket, <span class="ch">'\n'</span>)[<span class="fl">2</span>], <span class="ch">','</span>))</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    nearby_tickets <span class="op">=</span> [<span class="fu">parse</span>.(<span class="dt">Int</span>, ticket) for ticket <span class="kw">in</span> <span class="fu">split</span>.(<span class="fu">split</span>(nearby_tickets, <span class="ch">'\n'</span>)[<span class="fl">2</span><span class="op">:</span><span class="kw">end</span>], <span class="ch">','</span>)]</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    rules, your_ticket, nearby_tickets</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    rules, your_ticket, nearby_tickets <span class="op">=</span> data</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>    invalid_fields <span class="op">=</span> <span class="dt">Int</span>[]</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ticket <span class="kw">in</span> nearby_tickets, field <span class="kw">in</span> ticket</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>        !<span class="fu">any</span>([field <span class="op">∈</span> rule for rule <span class="kw">in</span> <span class="bu">Iterators</span>.<span class="fu">flatten</span>(<span class="fu">values</span>(rules))]) <span class="op">&amp;&amp;</span> <span class="fu">push!</span>(invalid_fields, field)</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(invalid_fields)</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I believe part 2 is better expressed as a graph where you solve the max flow problem to find the maximum matching. However, this is not how I solved it below. I’m hoping to re-solve this problem using <a href="https://github.com/JuliaGraphs/LightGraphs.jl">LightGraphs.jl</a>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    rules, your_ticket, nearby_tickets <span class="op">=</span> data</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    invalid_tickets <span class="op">=</span> <span class="dt">Int</span>[]</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i, ticket) <span class="kw">in</span> <span class="fu">enumerate</span>(nearby_tickets), field <span class="kw">in</span> ticket</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>        !<span class="fu">any</span>([field <span class="op">∈</span> rule for rule <span class="kw">in</span> <span class="bu">Iterators</span>.<span class="fu">flatten</span>(<span class="fu">values</span>(rules))]) <span class="op">&amp;&amp;</span> <span class="fu">push!</span>(invalid_tickets, i)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    valid_tickets <span class="op">=</span> <span class="fu">deleteat!</span>(nearby_tickets, invalid_tickets)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    valid <span class="op">=</span> <span class="fu">ones</span>(<span class="dt">Bool</span>, <span class="fu">length</span>(<span class="fu">first</span>(valid_tickets)), <span class="fu">length</span>(rules))</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ticket <span class="kw">in</span> valid_tickets, (i, field) <span class="kw">in</span> <span class="fu">enumerate</span>(ticket), (j, rule) <span class="kw">in</span> <span class="fu">enumerate</span>(rules)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>        _, (rule1, rule2) <span class="op">=</span> rule</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>        !(field <span class="op">∈</span> rule1 <span class="op">||</span> field <span class="op">∈</span> rule2) <span class="op">&amp;&amp;</span> ( valid[i, j] <span class="op">=</span> <span class="cn">false</span> )</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    final <span class="op">=</span> [<span class="fl">0</span> for _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(rules)]</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    accounted_for <span class="op">=</span> <span class="fu">Set</span><span class="dt">{Int}</span>()</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="fu">length</span>(accounted_for) <span class="op">!=</span> <span class="fu">length</span>(rules)</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(<span class="fu">first</span>(valid_tickets))</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>            valid_rules <span class="op">=</span> [j for j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(rules) if valid[i, j] <span class="op">&amp;&amp;</span> j <span class="op">∉</span> accounted_for]</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="fu">length</span>(valid_rules) <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>                final[i] <span class="op">=</span> <span class="fu">only</span>(valid_rules)</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>                <span class="fu">push!</span>(accounted_for, <span class="fu">only</span>(valid_rules))</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>    answer <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (interest, k) <span class="kw">in</span> <span class="fu">enumerate</span>(<span class="fu">keys</span>(rules))</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>        !<span class="fu">startswith</span>(k, <span class="st">"departure"</span>) <span class="op">&amp;&amp;</span> <span class="cf">continue</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (i, index) <span class="kw">in</span> <span class="fu">enumerate</span>(final)</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>            index <span class="op">==</span> interest <span class="op">&amp;&amp;</span> ( answer <span class="op">*=</span> your_ticket[i] )</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>    answer</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>My learning from this day was that in Julia you can refactor the code with multiple nested <code>for</code> loops:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ticket <span class="kw">in</span> valid_tickets</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i, field) <span class="kw">in</span> <span class="fu">enumerate</span>(ticket)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (j, rule) <span class="kw">in</span> <span class="fu">enumerate</span>(rules)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>            _, (rule1, rule2) <span class="op">=</span> rule</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>            !(field <span class="op">∈</span> rule1 <span class="op">||</span> field <span class="op">∈</span> rule2) <span class="op">&amp;&amp;</span> ( valid[i, j] <span class="op">=</span> <span class="cn">false</span> )</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>into a single line like so:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ticket <span class="kw">in</span> valid_tickets, (i, field) <span class="kw">in</span> <span class="fu">enumerate</span>(ticket), (j, rule) <span class="kw">in</span> <span class="fu">enumerate</span>(rules)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    _, (rule1, rule2) <span class="op">=</span> rule</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    !(field <span class="op">∈</span> rule1 <span class="op">||</span> field <span class="op">∈</span> rule2) <span class="op">&amp;&amp;</span> ( valid[i, j] <span class="op">=</span> <span class="cn">false</span> )</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can even use the variable from the outer loop as the index in the inner loop, like you’d expect. This can help reduce the nesting level of your inner expressions.</p>
</section>
<section id="day-17-conway-cubes" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="day-17-conway-cubes"><a href="https://adventofcode.com/2020/day/17">Day 17: Conway Cubes</a></h3>
<p>Another homage to <a href="https://en.wikipedia.org/wiki/John_Horton_Conway">John Conway</a>, this time in multiple dimensions.</p>
<p>Here’s <a href="https://github.com/mkborregaard">Michael Krabbe Borregaard’s</a> succinct solution that takes advantage of <code>CartesianIndices</code>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">parsefield</span>(lines, n, dims)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    field <span class="op">=</span> <span class="fu">falses</span>(<span class="fu">fill</span>(n, dims)<span class="op">...</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i,line) <span class="kw">in</span> <span class="fu">enumerate</span>(lines), (j, char) <span class="kw">in</span> <span class="fu">enumerate</span>(line)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        char <span class="op">==</span> <span class="ch">'#'</span> <span class="op">&amp;&amp;</span> (field[i <span class="op">+</span> n<span class="op">÷</span><span class="fl">2</span>, j <span class="op">+</span> n<span class="op">÷</span><span class="fl">2</span>, <span class="fu">fill</span>(n<span class="op">÷</span><span class="fl">2</span>, dims<span class="op">-</span><span class="fl">2</span>)<span class="op">...</span>] <span class="op">=</span> <span class="cn">true</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    field</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">startup</span>(lines, rounds, dims)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    field <span class="op">=</span> <span class="fu">parsefield</span>(lines, <span class="fl">2</span><span class="fu">*</span>(<span class="fu">length</span>(lines) <span class="op">+</span> rounds <span class="op">+</span> <span class="fl">2</span>), dims)</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    newfield <span class="op">=</span> <span class="fu">copy</span>(field)</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>rounds</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> ind <span class="kw">in</span> <span class="fu">CartesianIndices</span>(field)[<span class="fu">fill</span>(<span class="fl">2</span><span class="op">+</span>rounds<span class="op">-</span>n<span class="op">:</span><span class="fu">size</span>(field, <span class="fl">1</span>)<span class="op">-</span>rounds<span class="op">-</span><span class="fl">1</span><span class="op">+</span>n, dims)<span class="op">...</span>]</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>            counter <span class="op">=</span> <span class="fu">sum</span>(field[((<span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span>) <span class="op">.+</span> i for i <span class="kw">in</span> <span class="fu">Tuple</span>(ind))<span class="op">...</span>]) <span class="op">-</span> field[ind]</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>            newfield[ind] <span class="op">=</span> field[ind] ? counter <span class="kw">in</span> (<span class="fl">2</span>,<span class="fl">3</span>) <span class="op">:</span> counter <span class="op">==</span> <span class="fl">3</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>        field <span class="op">.=</span> newfield</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(field)</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">readlines</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>))</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">startup</span>(data, <span class="fl">6</span>, <span class="fl">3</span>)</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">startup</span>(data, <span class="fl">6</span>, <span class="fl">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Cellular automata puzzles are always fun, and make for some neat visualizations. Here are a couple of multi dimensional visualizations by <a href="https://github.com/tk3369/AdventOfCode2020/">Tom Kwong</a>:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://user-images.githubusercontent.com/1813121/103164882-1371eb00-47ce-11eb-92d7-624ebf54c0f9.gif" class="img-fluid figure-img"></p>
<figcaption class="margin-caption"><a href="https://twitter.com/tomkwong/status/1339468003608387586" class="uri">https://twitter.com/tomkwong/status/1339468003608387586</a></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://user-images.githubusercontent.com/1813121/103164897-39978b00-47ce-11eb-8c36-d9477cb839d1.gif" class="img-fluid figure-img"></p>
<figcaption class="margin-caption"><a href="https://twitter.com/tomkwong/status/1339735696194457600" class="uri">https://twitter.com/tomkwong/status/1339735696194457600</a></figcaption>
</figure>
</div>
</section>
<section id="day-18-operation-order" class="level3">
<h3 class="anchored" data-anchor-id="day-18-operation-order"><a href="https://adventofcode.com/2020/day/18">Day 18: Operation Order</a></h3>
<p>The intended way to solve such problems is by implementing the <a href="https://en.wikipedia.org/wiki/Shunting-yard_algorithm">Shunting-yard algorithm</a>.</p>
<p>However, you can hack the operator precedence in your programming language of choice and take advantage of the built in parser.</p>
<p>Here is <a href="https://github.com/dgkf/advent-of-code/blob/98ee142a61b453a766331c65ece372978041935e/2020/18/18.jl">Doug’s</a> that managed to get him a spot on the global leaderboard.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">readlines</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>))</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">⨦</span>(a,b) <span class="op">=</span> a <span class="op">*</span> b  <span class="co"># define "multiplication" with same precedence as "+"</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">sum</span>(l <span class="op">-&gt;</span> <span class="fu">eval</span>(<span class="bu">Meta</span>.<span class="fu">parse</span>(<span class="fu">replace</span>(l, <span class="st">"*"</span> <span class="op">=&gt;</span> <span class="st">"⨦"</span>))), data)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="fu">⨱</span>(a,b) <span class="op">=</span> a <span class="op">+</span> b  <span class="co"># define "addition" with precedence of "*"</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">sum</span>(l <span class="op">-&gt;</span> <span class="fu">eval</span>(<span class="bu">Meta</span>.<span class="fu">parse</span>(<span class="fu">replace</span>(<span class="fu">replace</span>(l, <span class="st">"*"</span> <span class="op">=&gt;</span> <span class="st">"⨦"</span>), <span class="st">"+"</span> <span class="op">=&gt;</span> <span class="st">"⨱"</span>))), data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The key is to find the right operators in your programming language that have the precedence required as per the prompt.</p>
</section>
<section id="day-19-monster-messages" class="level3">
<h3 class="anchored" data-anchor-id="day-19-monster-messages"><a href="https://adventofcode.com/2020/day/19">Day 19: Monster Messages</a></h3>
<p>This was another hard day for me. First, I tried to implement a recursive algorithm. After failing to figure this out, I picked it up again on the next day with a clean slate, and I tried to build a regex that would match various messages. This worked for part 1 but I kept running out of memory for part 2. Finally, after changing some of the rules hard-coding them by hand I was able to solve part 2.</p>
<p>Specifically, I hard coded rules <code>"8"</code> and <code>"11"</code> to the following.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>rules[<span class="st">"8"</span>] <span class="op">=</span> <span class="st">"(42)+"</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>rules[<span class="st">"11"</span>] <span class="op">=</span> <span class="st">"42 31 | 42 ( 42 31 | 42 ( 42 31 | 42 ( 42 31 | 42 ( 42 31 ) 31 ) 31 ) 31 ) 31"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This limits the depth of rule <code>"11"</code>. One more step however and I was getting PCRE memory errors.</p>
<p>Here’s a solution by <a href="https://github.com/dgkf/advent-of-code/blob/98ee142a61b453a766331c65ece372978041935e/2020/19/19.jl">Doug</a> that does the same thing elegantly and programmatically.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">readInput</span>()</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  rules, messages <span class="op">=</span> <span class="fu">split</span>.(<span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>), <span class="ch">'\n'</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  rules <span class="op">=</span> <span class="fu">Dict</span>(<span class="fu">map</span>(rules) <span class="cf">do</span> line</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>      m <span class="op">=</span> <span class="fu">match</span>(<span class="st">r"^</span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">: </span><span class="ch">(</span><span class="sc">\"</span><span class="ch">(</span><span class="sc">\w+</span><span class="ch">)</span><span class="sc">\"</span><span class="ch">|([^</span><span class="st">|</span><span class="ch">]</span><span class="sc">+</span><span class="ch">)|(</span><span class="sc">.+</span><span class="ch">))</span><span class="sc">$</span><span class="st">", </span>line<span class="ch">)</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">String</span>(m[<span class="fl">1</span>]) <span class="op">=&gt;</span> m[<span class="fl">3</span>] isa <span class="dt">Nothing</span> ? (m[<span class="fl">4</span>] isa <span class="dt">Nothing</span> ? <span class="st">"(?:</span><span class="sc">$</span>(m[<span class="fl">5</span>])<span class="st">)"</span> <span class="op">:</span> <span class="fu">String</span>(m[<span class="fl">4</span>])) <span class="op">:</span> <span class="fu">String</span>(m[<span class="fl">3</span>])</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span>)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  rules, messages</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">resolve</span>(rule, rules)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    ns <span class="op">=</span> [nsi.match for nsi <span class="op">=</span> <span class="fu">eachmatch</span>(<span class="st">r"</span><span class="sc">\b\d+\b</span><span class="st">"</span>, rule)]</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    n_res <span class="op">=</span> [<span class="fu">Regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">$</span>nsi<span class="sc">\\</span><span class="st">b"</span>) for nsi <span class="op">=</span> ns]</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    n_rep <span class="op">=</span> [<span class="fu">resolve</span>(rules[nsi], rules) for nsi<span class="op">=</span>ns]</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace</span>(<span class="fu">reduce</span>(replace, n_res <span class="op">.=&gt;</span> n_rep, init <span class="op">=</span> rule), <span class="st">" "</span> <span class="op">=&gt;</span> <span class="st">""</span>)</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    rules, messages <span class="op">=</span> data</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="fu">contains</span>(<span class="fu">Regex</span>(<span class="st">"^</span><span class="sc">$</span>(<span class="fu">resolve</span>(rules[<span class="st">"0"</span>], rules))<span class="st">\$"</span>)), messages)</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    rules, messages <span class="op">=</span> data</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>    rule42 <span class="op">=</span> <span class="fu">resolve</span>(rules[<span class="st">"42"</span>], rules)</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>    rule31 <span class="op">=</span> <span class="fu">resolve</span>(rules[<span class="st">"31"</span>], rules)</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="fu">contains</span>(<span class="fu">Regex</span>(<span class="st">"^</span><span class="sc">$</span>rule42<span class="st">+(</span><span class="sc">$</span>rule42<span class="st">(?1)?</span><span class="sc">$</span>rule31<span class="st">)\$"</span>)), messages)</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As noted by <a href="https://git.sr.ht/~quf/advent-of-code-2020/">/u/furiousleep</a> on <a href="https://reddit.com/r/adventofcode/comments/klmlx2/2020_days_125_idiomatic_solutions_in_julia_with/gh9xhrk/">/r/adventofcode (along with other valuable feedback)</a>, the intended solution for this would use the <a href="https://en.wikipedia.org/wiki/CYK_algorithm">CYK algorithm</a>. I would like to rewrite my solution using this algorithm instead.</p>
</section>
<section id="day-20-jurassic-jigsaw" class="level3">
<h3 class="anchored" data-anchor-id="day-20-jurassic-jigsaw"><a href="https://adventofcode.com/2020/day/20">Day 20: Jurassic Jigsaw</a></h3>
<p>This puzzle was really fun to figure out but also tedious to type out everything that you needed to type out. While I was able to solve the problem, I hard-coded many things in my solution. My code doesn’t even work for the test cases. This is just one of those puzzles that is easier to solve on paper than to write an actual working implementation.</p>
<p>Here’s a working solution by <a href="https://github.com/talentdeficit/aoc2020/blob/1bdc06f7428c8e8c59a2748fbd1c2fa0e04e67c5/bin/twenty/run.jl">Alisdair Sullivan</a>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">map</span>(t <span class="op">-&gt;</span> <span class="fu">split</span>(t, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>), <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>))</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Tile</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    id<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    raw<span class="op">::</span><span class="dt">Array{Char, 2}</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">copy</span>(tile<span class="op">::</span><span class="dt">Tile</span>)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="op">=</span> <span class="fu">copy</span>(tile.raw)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">Tile</span>(tile.id, <span class="kw">new</span>)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="fu">Tile</span>(<span class="fl">1</span>, [<span class="ch">'a'</span> <span class="ch">'b'</span> <span class="ch">'c'</span>; <span class="ch">'d'</span> <span class="ch">'e'</span> <span class="ch">'f'</span>])</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">size</span>(tile<span class="op">::</span><span class="dt">Tile</span>)</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Base</span>.<span class="fu">size</span>(tile.raw)</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">top</span>(tile<span class="op">::</span><span class="dt">Tile</span>)</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    (y, x) <span class="op">=</span> <span class="fu">size</span>(tile)</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tile.raw[<span class="fu">range</span>(<span class="fl">1</span>, length<span class="op">=</span>x, step<span class="op">=</span>y)]</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">right</span>(tile<span class="op">::</span><span class="dt">Tile</span>)</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>    (y, x) <span class="op">=</span> <span class="fu">size</span>(tile)</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tile.raw[<span class="fu">range</span>((x <span class="op">*</span> y) <span class="op">-</span> y <span class="op">+</span> <span class="fl">1</span>, length<span class="op">=</span>y, step<span class="op">=</span><span class="fl">1</span>)]</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">bottom</span>(tile<span class="op">::</span><span class="dt">Tile</span>)</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>    (y, x) <span class="op">=</span> <span class="fu">size</span>(tile)</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tile.raw[<span class="fu">range</span>(y, length<span class="op">=</span>x, step<span class="op">=</span>y)]</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">left</span>(tile<span class="op">::</span><span class="dt">Tile</span>)</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>    (y, x) <span class="op">=</span> <span class="fu">size</span>(tile)</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> tile.raw[<span class="fu">range</span>(<span class="fl">1</span>, length<span class="op">=</span>y, step<span class="op">=</span><span class="fl">1</span>)]</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">flip!</span>(tile)</span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="op">=</span> tile.raw[<span class="op">:</span>,<span class="kw">end</span><span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span>]</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a>    tile.raw <span class="op">=</span> <span class="kw">new</span></span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">rotate!</span>(tile)</span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="op">=</span> <span class="fu">rotr90</span>(tile.raw)</span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>    tile.raw <span class="op">=</span> <span class="kw">new</span></span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">parse_tiles</span>(tiles)</span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">map</span>(tile <span class="op">-&gt;</span> <span class="fu">parse_tile</span>(tile), tiles)</span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">parse_tile</span>(tile)</span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="fu">match</span>(<span class="st">r"</span><span class="ch">(</span><span class="sc">\d+</span><span class="ch">)</span><span class="st">"</span>, <span class="fu">first</span>(tile))</span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a>    id <span class="op">=</span> <span class="fu">parse</span>(<span class="dt">Int</span>, m.captures[<span class="fl">1</span>])</span>
<span id="cb48-56"><a href="#cb48-56" aria-hidden="true" tabindex="-1"></a>    raw <span class="op">=</span> <span class="fu">reduce</span>(vcat, <span class="fu">permutedims</span>.(<span class="fu">collect</span>.(tile[<span class="fl">2</span><span class="op">:</span><span class="kw">end</span>])))</span>
<span id="cb48-57"><a href="#cb48-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">Tile</span>(id, raw)</span>
<span id="cb48-58"><a href="#cb48-58" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-59"><a href="#cb48-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-60"><a href="#cb48-60" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">find_edges</span>(tile)</span>
<span id="cb48-61"><a href="#cb48-61" aria-hidden="true" tabindex="-1"></a>    edges <span class="op">=</span> []</span>
<span id="cb48-62"><a href="#cb48-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">top</span>(tile))</span>
<span id="cb48-63"><a href="#cb48-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">right</span>(tile))</span>
<span id="cb48-64"><a href="#cb48-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">bottom</span>(tile))</span>
<span id="cb48-65"><a href="#cb48-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">left</span>(tile))</span>
<span id="cb48-66"><a href="#cb48-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">reverse</span>(<span class="fu">top</span>(tile)))</span>
<span id="cb48-67"><a href="#cb48-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">reverse</span>(<span class="fu">right</span>(tile)))</span>
<span id="cb48-68"><a href="#cb48-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">reverse</span>(<span class="fu">bottom</span>(tile)))</span>
<span id="cb48-69"><a href="#cb48-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(edges, <span class="fu">reverse</span>(<span class="fu">left</span>(tile)))</span>
<span id="cb48-70"><a href="#cb48-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> edges</span>
<span id="cb48-71"><a href="#cb48-71" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-72"><a href="#cb48-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-73"><a href="#cb48-73" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">orient!</span>(tile, matches)</span>
<span id="cb48-74"><a href="#cb48-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> flipped <span class="kw">in</span> (<span class="cn">false</span>, <span class="cn">true</span>), i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb48-75"><a href="#cb48-75" aria-hidden="true" tabindex="-1"></a>        <span class="fu">matches</span>(tile) <span class="op">&amp;&amp;</span> <span class="cf">return</span></span>
<span id="cb48-76"><a href="#cb48-76" aria-hidden="true" tabindex="-1"></a>        flipped <span class="op">&amp;&amp;</span> <span class="fu">flip!</span>(tile)</span>
<span id="cb48-77"><a href="#cb48-77" aria-hidden="true" tabindex="-1"></a>        flipped <span class="op">&amp;&amp;</span> <span class="fu">matches</span>(tile) <span class="op">&amp;&amp;</span> <span class="cf">return</span></span>
<span id="cb48-78"><a href="#cb48-78" aria-hidden="true" tabindex="-1"></a>        flipped <span class="op">&amp;&amp;</span> <span class="fu">flip!</span>(tile)</span>
<span id="cb48-79"><a href="#cb48-79" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rotate!</span>(tile)</span>
<span id="cb48-80"><a href="#cb48-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb48-81"><a href="#cb48-81" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-82"><a href="#cb48-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-83"><a href="#cb48-83" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">find_corners</span>(tiles)</span>
<span id="cb48-84"><a href="#cb48-84" aria-hidden="true" tabindex="-1"></a>    corners <span class="op">=</span> []</span>
<span id="cb48-85"><a href="#cb48-85" aria-hidden="true" tabindex="-1"></a>    ec <span class="op">=</span> <span class="fu">count_edges</span>(tiles)</span>
<span id="cb48-86"><a href="#cb48-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-87"><a href="#cb48-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> tile <span class="kw">in</span> tiles</span>
<span id="cb48-88"><a href="#cb48-88" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">sum</span>([<span class="fu">length</span>(ec[<span class="fu">top</span>(tile)]), <span class="fu">length</span>(ec[<span class="fu">bottom</span>(tile)]), <span class="fu">length</span>(ec[<span class="fu">left</span>(tile)]), <span class="fu">length</span>(ec[<span class="fu">right</span>(tile)])])</span>
<span id="cb48-89"><a href="#cb48-89" aria-hidden="true" tabindex="-1"></a>        c <span class="op">==</span> <span class="fl">6</span> <span class="op">&amp;&amp;</span> <span class="fu">push!</span>(corners, tile)</span>
<span id="cb48-90"><a href="#cb48-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb48-91"><a href="#cb48-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> corners</span>
<span id="cb48-92"><a href="#cb48-92" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-93"><a href="#cb48-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-94"><a href="#cb48-94" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">count_edges</span>(tiles)</span>
<span id="cb48-95"><a href="#cb48-95" aria-hidden="true" tabindex="-1"></a>    acc <span class="op">=</span> <span class="fu">Dict</span><span class="dt">{Vector{Char}, Vector{Int}}</span>()</span>
<span id="cb48-96"><a href="#cb48-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> tile <span class="kw">in</span> tiles</span>
<span id="cb48-97"><a href="#cb48-97" aria-hidden="true" tabindex="-1"></a>        edges <span class="op">=</span> <span class="fu">find_edges</span>(tile)</span>
<span id="cb48-98"><a href="#cb48-98" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> edge <span class="kw">in</span> edges</span>
<span id="cb48-99"><a href="#cb48-99" aria-hidden="true" tabindex="-1"></a>            <span class="fu">haskey</span>(acc, edge) ? acc[edge] <span class="op">=</span> <span class="fu">append!</span>(acc[edge], tile.id) <span class="op">:</span> acc[edge] <span class="op">=</span> [tile.id]</span>
<span id="cb48-100"><a href="#cb48-100" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb48-101"><a href="#cb48-101" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb48-102"><a href="#cb48-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> acc</span>
<span id="cb48-103"><a href="#cb48-103" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-104"><a href="#cb48-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-105"><a href="#cb48-105" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">find_origin</span>(tiles)</span>
<span id="cb48-106"><a href="#cb48-106" aria-hidden="true" tabindex="-1"></a>    edges <span class="op">=</span> <span class="fu">count_edges</span>(tiles)</span>
<span id="cb48-107"><a href="#cb48-107" aria-hidden="true" tabindex="-1"></a>    corner <span class="op">=</span> <span class="fu">first</span>(<span class="fu">find_corners</span>(tiles))</span>
<span id="cb48-108"><a href="#cb48-108" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb48-109"><a href="#cb48-109" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> edges[<span class="fu">top</span>(corner)]</span>
<span id="cb48-110"><a href="#cb48-110" aria-hidden="true" tabindex="-1"></a>        l <span class="op">=</span> edges[<span class="fu">left</span>(corner)]</span>
<span id="cb48-111"><a href="#cb48-111" aria-hidden="true" tabindex="-1"></a>        <span class="fu">length</span>(t) <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="fu">length</span>(l) <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="cf">return</span> corner</span>
<span id="cb48-112"><a href="#cb48-112" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rotate!</span>(corner)</span>
<span id="cb48-113"><a href="#cb48-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb48-114"><a href="#cb48-114" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-115"><a href="#cb48-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-116"><a href="#cb48-116" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">trim</span>(tile)</span>
<span id="cb48-117"><a href="#cb48-117" aria-hidden="true" tabindex="-1"></a>    raw <span class="op">=</span> tile.raw</span>
<span id="cb48-118"><a href="#cb48-118" aria-hidden="true" tabindex="-1"></a>    (x, y) <span class="op">=</span> <span class="fu">size</span>(tile)</span>
<span id="cb48-119"><a href="#cb48-119" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> raw[<span class="fl">2</span><span class="op">:</span>(x <span class="op">-</span> <span class="fl">1</span>),<span class="fl">2</span><span class="op">:</span>(y <span class="op">-</span> <span class="fl">1</span>)]</span>
<span id="cb48-120"><a href="#cb48-120" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-121"><a href="#cb48-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-122"><a href="#cb48-122" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">assemble</span>(tiles)</span>
<span id="cb48-123"><a href="#cb48-123" aria-hidden="true" tabindex="-1"></a>    origin <span class="op">=</span> <span class="fu">find_origin</span>(<span class="fu">deepcopy</span>(tiles))</span>
<span id="cb48-124"><a href="#cb48-124" aria-hidden="true" tabindex="-1"></a>    edges <span class="op">=</span> <span class="fu">count_edges</span>(<span class="fu">deepcopy</span>(tiles))</span>
<span id="cb48-125"><a href="#cb48-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-126"><a href="#cb48-126" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> []</span>
<span id="cb48-127"><a href="#cb48-127" aria-hidden="true" tabindex="-1"></a>    row <span class="op">=</span> [origin]</span>
<span id="cb48-128"><a href="#cb48-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-129"><a href="#cb48-129" aria-hidden="true" tabindex="-1"></a>    rowstart <span class="op">=</span> origin</span>
<span id="cb48-130"><a href="#cb48-130" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> origin</span>
<span id="cb48-131"><a href="#cb48-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-132"><a href="#cb48-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> !<span class="fu">isnothing</span>(current)</span>
<span id="cb48-133"><a href="#cb48-133" aria-hidden="true" tabindex="-1"></a>        match <span class="op">=</span> edges[<span class="fu">right</span>(current)]</span>
<span id="cb48-134"><a href="#cb48-134" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="fu">length</span>(match) <span class="op">==</span> <span class="fl">2</span></span>
<span id="cb48-135"><a href="#cb48-135" aria-hidden="true" tabindex="-1"></a>            next_id <span class="op">=</span> <span class="fu">only</span>(<span class="fu">filter</span>(id <span class="op">-&gt;</span> id <span class="op">!=</span> current.id, match))</span>
<span id="cb48-136"><a href="#cb48-136" aria-hidden="true" tabindex="-1"></a>            next_idx <span class="op">=</span> <span class="fu">findfirst</span>(t <span class="op">-&gt;</span> t.id <span class="op">==</span> next_id, tiles)</span>
<span id="cb48-137"><a href="#cb48-137" aria-hidden="true" tabindex="-1"></a>            next <span class="op">=</span> tiles[next_idx]</span>
<span id="cb48-138"><a href="#cb48-138" aria-hidden="true" tabindex="-1"></a>            matcher <span class="op">=</span> (t) <span class="op">-&gt;</span> <span class="fu">left</span>(t) <span class="op">==</span> <span class="fu">right</span>(current)</span>
<span id="cb48-139"><a href="#cb48-139" aria-hidden="true" tabindex="-1"></a>            <span class="fu">orient!</span>(next, matcher)</span>
<span id="cb48-140"><a href="#cb48-140" aria-hidden="true" tabindex="-1"></a>            <span class="fu">push!</span>(row, next)</span>
<span id="cb48-141"><a href="#cb48-141" aria-hidden="true" tabindex="-1"></a>            current <span class="op">=</span> next</span>
<span id="cb48-142"><a href="#cb48-142" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb48-143"><a href="#cb48-143" aria-hidden="true" tabindex="-1"></a>            <span class="fu">push!</span>(rows, row)</span>
<span id="cb48-144"><a href="#cb48-144" aria-hidden="true" tabindex="-1"></a>            match <span class="op">=</span> edges[<span class="fu">bottom</span>(rowstart)]</span>
<span id="cb48-145"><a href="#cb48-145" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="fu">length</span>(match) <span class="op">==</span> <span class="fl">2</span></span>
<span id="cb48-146"><a href="#cb48-146" aria-hidden="true" tabindex="-1"></a>                next_id <span class="op">=</span> <span class="fu">only</span>(<span class="fu">filter</span>(id <span class="op">-&gt;</span> id <span class="op">!=</span> rowstart.id, match))</span>
<span id="cb48-147"><a href="#cb48-147" aria-hidden="true" tabindex="-1"></a>                next_idx <span class="op">=</span> <span class="fu">findfirst</span>(t <span class="op">-&gt;</span> t.id <span class="op">==</span> next_id, tiles)</span>
<span id="cb48-148"><a href="#cb48-148" aria-hidden="true" tabindex="-1"></a>                next <span class="op">=</span> tiles[next_idx]</span>
<span id="cb48-149"><a href="#cb48-149" aria-hidden="true" tabindex="-1"></a>                <span class="fu">orient!</span>(next, (t) <span class="op">-&gt;</span> <span class="fu">top</span>(t) <span class="op">==</span> <span class="fu">bottom</span>(rowstart))</span>
<span id="cb48-150"><a href="#cb48-150" aria-hidden="true" tabindex="-1"></a>                current <span class="op">=</span> next</span>
<span id="cb48-151"><a href="#cb48-151" aria-hidden="true" tabindex="-1"></a>                rowstart <span class="op">=</span> current</span>
<span id="cb48-152"><a href="#cb48-152" aria-hidden="true" tabindex="-1"></a>                row <span class="op">=</span> [rowstart]</span>
<span id="cb48-153"><a href="#cb48-153" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb48-154"><a href="#cb48-154" aria-hidden="true" tabindex="-1"></a>                current <span class="op">=</span> <span class="cn">nothing</span></span>
<span id="cb48-155"><a href="#cb48-155" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb48-156"><a href="#cb48-156" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb48-157"><a href="#cb48-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb48-158"><a href="#cb48-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-159"><a href="#cb48-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">vcat</span>(<span class="fu">map</span>(row <span class="op">-&gt;</span> <span class="fu">hcat</span>(<span class="fu">map</span>(tile <span class="op">-&gt;</span> <span class="fu">trim</span>(tile), row)<span class="op">...</span>), rows)<span class="op">...</span>)</span>
<span id="cb48-160"><a href="#cb48-160" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-161"><a href="#cb48-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-162"><a href="#cb48-162" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">find_seamonsters</span>(assembled)</span>
<span id="cb48-163"><a href="#cb48-163" aria-hidden="true" tabindex="-1"></a>    <span class="co"># seamonster pattern</span></span>
<span id="cb48-164"><a href="#cb48-164" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> [</span>
<span id="cb48-165"><a href="#cb48-165" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">19</span>, <span class="fl">1</span>),</span>
<span id="cb48-166"><a href="#cb48-166" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">1</span>, <span class="fl">2</span>),</span>
<span id="cb48-167"><a href="#cb48-167" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">6</span>, <span class="fl">2</span>),</span>
<span id="cb48-168"><a href="#cb48-168" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">7</span>, <span class="fl">2</span>),</span>
<span id="cb48-169"><a href="#cb48-169" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">12</span>, <span class="fl">2</span>),</span>
<span id="cb48-170"><a href="#cb48-170" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">13</span>, <span class="fl">2</span>),</span>
<span id="cb48-171"><a href="#cb48-171" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">18</span>, <span class="fl">2</span>),</span>
<span id="cb48-172"><a href="#cb48-172" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">19</span>, <span class="fl">2</span>),</span>
<span id="cb48-173"><a href="#cb48-173" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">20</span>, <span class="fl">2</span>),</span>
<span id="cb48-174"><a href="#cb48-174" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">2</span>, <span class="fl">3</span>),</span>
<span id="cb48-175"><a href="#cb48-175" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">5</span>, <span class="fl">3</span>),</span>
<span id="cb48-176"><a href="#cb48-176" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">8</span>, <span class="fl">3</span>),</span>
<span id="cb48-177"><a href="#cb48-177" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">11</span>, <span class="fl">3</span>),</span>
<span id="cb48-178"><a href="#cb48-178" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">14</span>, <span class="fl">3</span>),</span>
<span id="cb48-179"><a href="#cb48-179" aria-hidden="true" tabindex="-1"></a>        <span class="fu">CartesianIndex</span>(<span class="fl">17</span>, <span class="fl">3</span>)</span>
<span id="cb48-180"><a href="#cb48-180" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb48-181"><a href="#cb48-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-182"><a href="#cb48-182" aria-hidden="true" tabindex="-1"></a>    (xr, yr) <span class="op">=</span> <span class="bu">Base</span>.<span class="fu">size</span>(assembled) <span class="op">.-</span> (<span class="fl">20</span>, <span class="fl">3</span>)</span>
<span id="cb48-183"><a href="#cb48-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-184"><a href="#cb48-184" aria-hidden="true" tabindex="-1"></a>    counts <span class="op">=</span> []</span>
<span id="cb48-185"><a href="#cb48-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-186"><a href="#cb48-186" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> flipped <span class="kw">in</span> (<span class="cn">false</span>, <span class="cn">true</span>), i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span id="cb48-187"><a href="#cb48-187" aria-hidden="true" tabindex="-1"></a>        flipped ? assembled <span class="op">=</span> assembled[<span class="kw">end</span><span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span>,<span class="op">:</span>] <span class="op">:</span> <span class="cn">nothing</span></span>
<span id="cb48-188"><a href="#cb48-188" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb48-189"><a href="#cb48-189" aria-hidden="true" tabindex="-1"></a>        idx <span class="op">=</span> <span class="fu">CartesianIndex</span>(<span class="fl">0</span>,<span class="fl">0</span>)</span>
<span id="cb48-190"><a href="#cb48-190" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>yr</span>
<span id="cb48-191"><a href="#cb48-191" aria-hidden="true" tabindex="-1"></a>            (x, y) <span class="op">=</span> <span class="fu">Tuple</span>(idx)</span>
<span id="cb48-192"><a href="#cb48-192" aria-hidden="true" tabindex="-1"></a>            idx <span class="op">=</span> <span class="fu">CartesianIndex</span>(<span class="fl">0</span>, y <span class="op">+</span> <span class="fl">1</span>)</span>
<span id="cb48-193"><a href="#cb48-193" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>xr</span>
<span id="cb48-194"><a href="#cb48-194" aria-hidden="true" tabindex="-1"></a>                idx <span class="op">+=</span> <span class="fu">CartesianIndex</span>(<span class="fl">1</span>, <span class="fl">0</span>)</span>
<span id="cb48-195"><a href="#cb48-195" aria-hidden="true" tabindex="-1"></a>                <span class="fu">all</span>(i <span class="op">-&gt;</span> assembled[idx <span class="op">+</span> i] <span class="op">==</span> <span class="ch">'#'</span>, indices) ? count <span class="op">+=</span> <span class="fl">1</span> <span class="op">:</span> <span class="cn">nothing</span></span>
<span id="cb48-196"><a href="#cb48-196" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb48-197"><a href="#cb48-197" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb48-198"><a href="#cb48-198" aria-hidden="true" tabindex="-1"></a>        <span class="fu">push!</span>(counts, count)</span>
<span id="cb48-199"><a href="#cb48-199" aria-hidden="true" tabindex="-1"></a>        flipped ? assembled <span class="op">=</span> assembled[<span class="kw">end</span><span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span>,<span class="op">:</span>] <span class="op">:</span> <span class="cn">nothing</span></span>
<span id="cb48-200"><a href="#cb48-200" aria-hidden="true" tabindex="-1"></a>        assembled <span class="op">=</span> <span class="fu">rotr90</span>(assembled)</span>
<span id="cb48-201"><a href="#cb48-201" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb48-202"><a href="#cb48-202" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> counts</span>
<span id="cb48-203"><a href="#cb48-203" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-204"><a href="#cb48-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-205"><a href="#cb48-205" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">check</span>(puzzle)</span>
<span id="cb48-206"><a href="#cb48-206" aria-hidden="true" tabindex="-1"></a>    acc <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb48-207"><a href="#cb48-207" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fu">eachindex</span>(puzzle)</span>
<span id="cb48-208"><a href="#cb48-208" aria-hidden="true" tabindex="-1"></a>        puzzle[i] <span class="op">==</span> <span class="ch">'#'</span> ? acc <span class="op">+=</span> <span class="fl">1</span> <span class="op">:</span> <span class="cn">nothing</span></span>
<span id="cb48-209"><a href="#cb48-209" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb48-210"><a href="#cb48-210" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> acc</span>
<span id="cb48-211"><a href="#cb48-211" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-212"><a href="#cb48-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-213"><a href="#cb48-213" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(tiles <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb48-214"><a href="#cb48-214" aria-hidden="true" tabindex="-1"></a>  tiles <span class="op">=</span> <span class="fu">parse_tiles</span>(tiles)</span>
<span id="cb48-215"><a href="#cb48-215" aria-hidden="true" tabindex="-1"></a>  corners <span class="op">=</span> <span class="fu">find_corners</span>(tiles)</span>
<span id="cb48-216"><a href="#cb48-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prod</span>(<span class="fu">map</span>(tile <span class="op">-&gt;</span> tile.id, corners))</span>
<span id="cb48-217"><a href="#cb48-217" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb48-218"><a href="#cb48-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-219"><a href="#cb48-219" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part2</span>(tiles <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb48-220"><a href="#cb48-220" aria-hidden="true" tabindex="-1"></a>  tiles <span class="op">=</span> <span class="fu">parse_tiles</span>(tiles)</span>
<span id="cb48-221"><a href="#cb48-221" aria-hidden="true" tabindex="-1"></a>  corners <span class="op">=</span> <span class="fu">find_corners</span>(tiles)</span>
<span id="cb48-222"><a href="#cb48-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-223"><a href="#cb48-223" aria-hidden="true" tabindex="-1"></a>  assembled <span class="op">=</span> <span class="fu">assemble</span>(tiles)</span>
<span id="cb48-224"><a href="#cb48-224" aria-hidden="true" tabindex="-1"></a>  counts <span class="op">=</span> <span class="fu">find_seamonsters</span>(assembled)</span>
<span id="cb48-225"><a href="#cb48-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-226"><a href="#cb48-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">check</span>(assembled) <span class="op">-</span> (<span class="fu">maximum</span>(counts) <span class="op">*</span> <span class="fl">15</span>)</span>
<span id="cb48-227"><a href="#cb48-227" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The key functions I found that others were using were <code>rotl90</code>, <code>rotr90</code> and <code>rot180</code> from the Julia standard library, like in <a href="https://github.com/pabloferz/AoC/blob/5475590e2ac3b08c4800aac59b5ad96e287a8c6a/2020/20/Day20.jl">Pablo Zubieta’s solution</a>.</p>
<p><a href="https://github.com/mkitti/advent_of_code_2020/blob/27a3886fd71a40a4b745037780cbeacacc770d78/aoc_20/aoc_20.jl">Mark Kittisopikul</a> also used <code>imfilter</code> from <a href="https://github.com/JuliaImages/ImageFiltering.jl">ImageFiltering.jl</a> to find the monsters, which I thought was pretty neat.</p>
</section>
<section id="day-21-allergen-assessment" class="level3">
<h3 class="anchored" data-anchor-id="day-21-allergen-assessment"><a href="https://adventofcode.com/2020/day/21">Day 21: Allergen Assessment</a></h3>
<p>This puzzle is another graph problem that can be solved quite elegantly using maximum flow algorithms to find the maximum matching. Here’s the solution of the test case using <a href="https://github.com/JuliaGraphs/LightGraphs.jl">LightGraphs.jl</a> and <a href="https://github.com/JuliaGraphs/LightGraphsFlows.jl">LightGraphFlows.jl</a>, as well as a visualization using <a href="https://github.com/JuliaPlots/GraphRecipes.jl">GraphRecipes.jl</a> and <a href="https://github.com/JuliaPlots/Plots.jl">Plots.jl</a>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LightGraphs</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LightGraphsFlows</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GraphRecipes</span>, <span class="bu">Plots</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>))</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">m</span>()</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">readInput</span>()), <span class="ch">'\n'</span>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> <span class="fu">map</span>(data) <span class="cf">do</span> line</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>        ingredients, allergens <span class="op">=</span> <span class="fu">match</span>(<span class="st">r"^</span><span class="ch">(</span><span class="sc">.*</span><span class="ch">)</span><span class="st"> </span><span class="sc">\(</span><span class="st">contains </span><span class="ch">(</span><span class="sc">.*</span><span class="ch">)</span><span class="sc">\)$</span><span class="st">", </span>line<span class="ch">)</span><span class="sc">.</span><span class="st">captures</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">String</span>.(<span class="fu">split</span>(ingredients)), <span class="fu">String</span>.(<span class="fu">split</span>(allergens, <span class="st">", "</span>))</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    all_ingredients, all_allergens <span class="op">=</span> <span class="fu">Set</span><span class="dt">{String}</span>(), <span class="fu">Set</span><span class="dt">{String}</span>()</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (ingredients, allergens) <span class="kw">in</span> data</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>        all_ingredients <span class="op">=</span> all_ingredients <span class="op">∪</span> <span class="fu">Set</span>(ingredients)</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>        all_allergens <span class="op">=</span> all_allergens <span class="op">∪</span> <span class="fu">Set</span>(allergens)</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    all_ingredients, all_allergens <span class="op">=</span> <span class="fu">collect</span>(all_ingredients), <span class="fu">collect</span>(all_allergens)</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> <span class="fu">Dict</span>()</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (ingredients, allergens) <span class="kw">in</span> data, allergen <span class="kw">in</span> allergens</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>        allergen <span class="op">∉</span> <span class="fu">keys</span>(d) <span class="op">&amp;&amp;</span> ( d[allergen] <span class="op">=</span> <span class="fu">Set</span>(ingredients) )</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>        d[allergen] <span class="op">=</span> d[allergen] <span class="op">∩</span> <span class="fu">Set</span>(ingredients)</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>    MAX_NODES <span class="op">=</span> <span class="fu">length</span>(all_ingredients) <span class="op">+</span> <span class="fu">length</span>(all_allergens) <span class="op">+</span> <span class="fl">2</span></span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>    g <span class="op">=</span> <span class="fu">SimpleDiGraph</span>(MAX_NODES)</span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> all_ingredients</span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">findfirst</span>(<span class="op">==</span>(i), all_ingredients)</span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">add_edge!</span>(g, <span class="fl">1</span>, i)</span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> a <span class="kw">in</span> all_allergens</span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fu">length</span>(all_ingredients) <span class="op">+</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">findfirst</span>(<span class="op">==</span>(a), all_allergens)</span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">add_edge!</span>(g, a, MAX_NODES)</span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (allergen, ingredients) <span class="kw">in</span> d, ingredient <span class="kw">in</span> ingredients</span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">findfirst</span>(<span class="op">==</span>(ingredient), all_ingredients)</span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">length</span>(all_ingredients) <span class="op">+</span> <span class="fu">findfirst</span>(<span class="op">==</span>(allergen), all_allergens)</span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>        <span class="fu">add_edge!</span>(g, i, a)</span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">graphplot</span>(g,</span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>        names <span class="op">=</span> <span class="fl">1</span><span class="op">:</span>MAX_NODES,</span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> <span class="fu">vcat</span>([[<span class="fl">1</span>]; [<span class="fl">2</span> for _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(all_ingredients)]; [<span class="fl">3</span> for _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(all_allergens)]; [<span class="fl">4</span>]]),</span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> <span class="fu">vcat</span>(</span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>                 [</span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>                  [<span class="fl">1</span>];</span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a>                  [i <span class="op">-</span> <span class="fu">length</span>(all_ingredients) <span class="op">÷</span> <span class="fl">2</span> for i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(all_ingredients)];</span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a>                  [a <span class="op">-</span> <span class="fu">length</span>(all_allergens) <span class="op">÷</span> <span class="fl">2</span> for a <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(all_allergens)];</span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a>                  [<span class="fl">1</span>]</span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>                 ]</span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>                ),</span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>        markercolor <span class="op">=</span> <span class="fu">vcat</span>([</span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>                            [colorant<span class="st">"white"</span>];</span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>                            [colorant<span class="st">"blue"</span> for _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(all_ingredients)];</span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a>                            [colorant<span class="st">"green"</span> for _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu">length</span>(all_allergens)];</span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a>                            [colorant<span class="st">"white"</span>]</span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a>                      ]),</span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a>        markersize <span class="op">=</span> <span class="fl">1</span>)</span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a>    _, F <span class="op">=</span> <span class="fu">maximum_flow</span>(g, <span class="fl">1</span>, MAX_NODES)</span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true" tabindex="-1"></a>    no_allergen_ingredients <span class="op">=</span> all_ingredients[[i <span class="op">-</span> <span class="fl">1</span> for i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>MAX_NODES if <span class="fu">count</span>(<span class="op">==</span>(<span class="fl">0</span>), F[i, <span class="op">:</span>]) <span class="op">==</span> MAX_NODES]]</span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true" tabindex="-1"></a>    no_allergen_ingredients</span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(<span class="fu">map</span>(data) <span class="cf">do</span> (ingredients, _)</span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true" tabindex="-1"></a>        <span class="fu">count</span>(i <span class="op">∈</span> ingredients <span class="cf">for</span> i <span class="kw">in</span> no_allergen_ingredients)</span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span>)</span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here are a couple of visualizations, the test data visualized as a graph is on the left and the maximum flow solution on the right.</p>
<p><img src="images/adventofcode-day21-part1-1.png" class="img-fluid" style="width:45.0%" alt="Input data"> <img src="images/adventofcode-day21-part1-2.png" class="img-fluid" style="width:45.0%" alt="Maximum flow solution"></p>
</section>
<section id="day-22-crab-combat" class="level3">
<h3 class="anchored" data-anchor-id="day-22-crab-combat"><a href="https://adventofcode.com/2020/day/22">Day 22: Crab Combat</a></h3>
<p>This puzzle was mostly straightforward too. The key here seems to be to implement the stopping conditions correctly, and take advantage of the stack based behavior of recursion in most programming languages.</p>
<p>Here’s a solution by <a href="https://github.com/ferrolho/advent-of-code/blob/b34dbe9ee5eef7a36fbf77044c83acc75fbe54cf/2020/22/puzzle.jl">Henrique Ferrolho’s</a>.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">play</span>(p₁, p₂, part₂)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  seen <span class="op">=</span> <span class="fu">Set</span><span class="dt">{Tuple{Array,Array}}</span>([])</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> !<span class="fu">any</span>(<span class="fu">isempty</span>.((p₁, p₂)))</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    (p₁, p₂) <span class="op">∈</span> seen <span class="op">&amp;&amp;</span> <span class="cf">return</span> <span class="fl">1</span>, p₁  <span class="co"># infinite-game-prevention rule</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">push!</span>(seen, <span class="fu">copy</span>.((p₁, p₂)))</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    c₁, c₂ <span class="op">=</span> <span class="fu">popfirst!</span>.((p₁, p₂))  <span class="co"># both players draw their top card</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> part₂ <span class="op">&amp;&amp;</span> <span class="fu">all</span>(<span class="fu">length</span>.((p₁, p₂)) <span class="op">.&gt;=</span> (c₁, c₂))</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>      w, _ <span class="op">=</span> <span class="fu">play</span>(<span class="fu">copy</span>.((p₁[<span class="fl">1</span><span class="op">:</span>c₁], p₂[<span class="fl">1</span><span class="op">:</span>c₂]))<span class="op">...</span>, part₂)</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> c₁ <span class="op">&gt;</span> c₂  w <span class="op">=</span> <span class="fl">1</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> c₂ <span class="op">&gt;</span> c₁  w <span class="op">=</span> <span class="fl">2</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="pp">@error</span> <span class="st">"Unexpected case: c₁ == c₂"</span> <span class="cf">end</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    w <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="fu">push!</span>(p₁, c₁, c₂)  <span class="co"># player 1 wins</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    w <span class="op">==</span> <span class="fl">2</span> <span class="op">&amp;&amp;</span> <span class="fu">push!</span>(p₂, c₂, c₁)  <span class="co"># player 2 wins</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  !<span class="fu">isempty</span>(p₁) ? (<span class="fl">1</span>, p₁) <span class="op">:</span> (<span class="fl">2</span>, p₂)</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">day22</span>()</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>  p₁, p₂ <span class="op">=</span> <span class="fu">split</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>) <span class="op">.|&gt;</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>           x <span class="op">-&gt;</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(x, <span class="ch">'\n'</span>, keepempty<span class="op">=</span><span class="cn">false</span>)[<span class="fl">2</span><span class="op">:</span><span class="kw">end</span>])</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>  result₁, result₂ <span class="op">=</span> <span class="fu">map</span>([<span class="cn">false</span>, <span class="cn">true</span>]) <span class="cf">do</span> part₂</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>    _, deck <span class="op">=</span> <span class="fu">play</span>(<span class="fu">copy</span>.((p₁, p₂))<span class="op">...</span>, part₂)</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>    multipliers <span class="op">=</span> <span class="fu">length</span>(deck)<span class="op">:-</span><span class="fl">1</span><span class="op">:</span><span class="fl">1</span></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(deck <span class="op">.*</span> multipliers)</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>  result₁, result₂</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>() <span class="op">=</span> <span class="fu">day22</span>()[<span class="fl">1</span>]</span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>() <span class="op">=</span> <span class="fu">day22</span>()[<span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Julia allows using unicode symbols as part of variable names which can make for some pretty looking code.</p>
</section>
<section id="day-23-crab-cups" class="level3">
<h3 class="anchored" data-anchor-id="day-23-crab-cups"><a href="https://adventofcode.com/2020/day/23">Day 23: Crab Cups</a></h3>
<p>This puzzle took me a while to figure out. I spent way too long looking for patterns in each state. Thanks to some helpful tips from fellow Julia advent-of-coders, I re-wrote it from scratch using a Linked List.</p>
<p>The key idea is here to manage the ordering in a separate data structure. Using a linked list is just one way to handle this.</p>
<p>Here’s a solution by <a href="https://github.com/nviennot">Nicolas Viennot</a> based on exchanging ideas with <a href="https://github.com/Teo-ShaoWei">Teo ShaoWei</a> that manages to do that quite elegantly using another array to manage indices:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int32</span>, <span class="fu">collect</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>))))</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">peek</span>(next, at, n; result<span class="op">=</span><span class="fu">similar</span>(next,n))</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>n</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>        result[i] <span class="op">=</span> next[at]</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>        at <span class="op">=</span> next[at]</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    result</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">run</span>(cups, steps<span class="op">=</span><span class="fl">1</span>)</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="fu">length</span>(cups)</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    prealloc <span class="op">=</span> <span class="fu">similar</span>(cups, <span class="fl">3</span>)</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    next <span class="op">=</span> <span class="fu">similar</span>(cups)</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>        next[cups[i]] <span class="op">=</span> cups[<span class="fu">mod1</span>(i<span class="op">+</span><span class="fl">1</span>,N)]</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> cups[<span class="fl">1</span>]</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>steps</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>        pickups <span class="op">=</span> <span class="fu">peek</span>(next, current, <span class="fl">3</span>, result<span class="op">=</span>prealloc)</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>        dst <span class="op">=</span> <span class="fu">mod1</span>(current<span class="op">-</span><span class="fl">1</span>, N)</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> dst <span class="kw">in</span> pickups</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>          dst <span class="op">=</span> <span class="fu">mod1</span>(dst<span class="op">-</span><span class="fl">1</span>, N)</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>        next[current] <span class="op">=</span> next[pickups[<span class="kw">end</span>]]</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>        next[pickups[<span class="kw">end</span>]] <span class="op">=</span> next[dst]</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>        next[dst] <span class="op">=</span> pickups[<span class="fl">1</span>]</span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>        current <span class="op">=</span> next[current]</span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> next</span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(cups <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">join</span>(<span class="fu">peek</span>(<span class="fu">run</span>(cups, <span class="fl">100</span>), <span class="fl">1</span>, <span class="fl">8</span>))</span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(cups <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">prod</span>(<span class="fu">peek</span>(<span class="fu">run</span>(<span class="fu">vcat</span>(cups, <span class="fl">10</span><span class="op">:</span><span class="fl">1_000_000</span>), <span class="fl">10_000_000</span>), <span class="fl">1</span>, <span class="fl">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="day-24-lobby-layout" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="day-24-lobby-layout"><a href="https://adventofcode.com/2020/day/24">Day 24: Lobby Layout</a></h3>
<p>In another tribute to John Conway, now you must model hexagon grids.</p>
<p>Having never worked with hexagon grid before, I reached for complex numbers again, which turned out to be a bad idea. I was indexing a dictionary with the real and imaginary components of the complex number which were floating point numbers. This caused all sorts of indexing problems due to rounding issues.</p>
<p>I could have sorted this out by using only integer values or by using the coordinate system described in this resource: <a href="https://www.redblobgames.com/grids/hexagons/#coordinates-cube" class="uri">https://www.redblobgames.com/grids/hexagons/#coordinates-cube</a>.</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="216" height="224" class="svgbob">
  <style>.svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {
  stroke: black;
  stroke-width: 2;
  stroke-opacity: 1;
  fill-opacity: 1;
  stroke-linecap: round;
  stroke-linejoin: miter;
}

.svgbob text {
  white-space: pre;
  fill: black;
  font-family: Iosevka Fixed, monospace;
  font-size: 14px;
}

.svgbob rect.backdrop {
  stroke: none;
  fill: white;
}

.svgbob .broken {
  stroke-dasharray: 8;
}

.svgbob .filled {
  fill: black;
}

.svgbob .bg_filled {
  fill: white;
  stroke-width: 1;
}

.svgbob .nofill {
  fill: white;
}

.svgbob .end_marked_arrow {
  marker-end: url(#arrow);
}

.svgbob .start_marked_arrow {
  marker-start: url(#arrow);
}

.svgbob .end_marked_diamond {
  marker-end: url(#diamond);
}

.svgbob .start_marked_diamond {
  marker-start: url(#diamond);
}

.svgbob .end_marked_circle {
  marker-end: url(#circle);
}

.svgbob .start_marked_circle {
  marker-start: url(#circle);
}

.svgbob .end_marked_open_circle {
  marker-end: url(#open_circle);
}

.svgbob .start_marked_open_circle {
  marker-start: url(#open_circle);
}

.svgbob .end_marked_big_open_circle {
  marker-end: url(#big_open_circle);
}

.svgbob .start_marked_big_open_circle {
  marker-start: url(#big_open_circle);
}

</style>
  <defs>
    <marker id="arrow" viewbox="-2 -2 8 8" refx="4" refy="2" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <polygon points="0,0 0,4 4,2 0,0"></polygon>
    </marker>
    <marker id="diamond" viewbox="-2 -2 8 8" refx="4" refy="2" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
    </marker>
    <marker id="circle" viewbox="0 0 8 8" refx="4" refy="4" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <circle cx="4" cy="4" r="2" class="filled"></circle>
    </marker>
    <marker id="open_circle" viewbox="0 0 8 8" refx="4" refy="4" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
    </marker>
    <marker id="big_open_circle" viewbox="0 0 8 8" refx="4" refy="4" markerwidth="7" markerheight="7" orient="auto-start-reverse">
      <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
    </marker>
  </defs>
  <rect class="backdrop" x="0" y="0" width="216" height="224"></rect>
  <text x="98" y="28">0</text>
  <line x1="112" y1="24" x2="120" y2="24" class="solid"></line>
  <text x="122" y="28">1</text>
  <line x1="40" y1="56" x2="48" y2="56" class="solid"></line>
  <text x="50" y="60">1</text>
  <text x="66" y="60">0</text>
  <text x="106" y="60">+1</text>
  <text x="154" y="60">1</text>
  <line x1="168" y1="56" x2="176" y2="56" class="solid"></line>
  <text x="178" y="60">1</text>
  <text x="58" y="92">1</text>
  <text x="98" y="92">x</text>
  <text x="122" y="92">z</text>
  <text x="170" y="92">0</text>
  <line x1="40" y1="120" x2="48" y2="120" class="solid"></line>
  <text x="50" y="124">1</text>
  <text x="66" y="124">1</text>
  <text x="114" y="124">y</text>
  <text x="154" y="124">1</text>
  <text x="178" y="124">0</text>
  <text x="58" y="156">0</text>
  <text x="98" y="156">0</text>
  <text x="122" y="156">1</text>
  <line x1="160" y1="152" x2="168" y2="152" class="solid"></line>
  <text x="170" y="156">1</text>
  <line x1="104" y1="184" x2="112" y2="184" class="solid"></line>
  <text x="114" y="188">1</text>
  <g>
    <line x1="92" y1="8" x2="132" y2="8" class="solid"></line>
    <line x1="92" y1="8" x2="76" y2="40" class="solid"></line>
    <line x1="132" y1="8" x2="148" y2="40" class="solid"></line>
    <line x1="36" y1="40" x2="76" y2="40" class="solid"></line>
    <line x1="36" y1="40" x2="20" y2="72" class="solid"></line>
    <line x1="76" y1="40" x2="92" y2="72" class="solid"></line>
    <line x1="148" y1="40" x2="188" y2="40" class="solid"></line>
    <line x1="148" y1="40" x2="132" y2="72" class="solid"></line>
    <line x1="188" y1="40" x2="204" y2="72" class="solid"></line>
    <line x1="20" y1="72" x2="36" y2="104" class="solid"></line>
    <line x1="92" y1="72" x2="132" y2="72" class="solid"></line>
    <line x1="92" y1="72" x2="76" y2="104" class="solid"></line>
    <line x1="132" y1="72" x2="148" y2="104" class="solid"></line>
    <line x1="204" y1="72" x2="188" y2="104" class="solid"></line>
    <line x1="36" y1="104" x2="76" y2="104" class="solid"></line>
    <line x1="36" y1="104" x2="20" y2="136" class="solid"></line>
    <line x1="76" y1="104" x2="92" y2="136" class="solid"></line>
    <line x1="148" y1="104" x2="188" y2="104" class="solid"></line>
    <line x1="148" y1="104" x2="132" y2="136" class="solid"></line>
    <line x1="188" y1="104" x2="204" y2="136" class="solid"></line>
    <line x1="20" y1="136" x2="34" y2="164" class="solid"></line>
    <line x1="92" y1="136" x2="132" y2="136" class="solid"></line>
    <line x1="92" y1="136" x2="76" y2="168" class="solid"></line>
    <line x1="132" y1="136" x2="148" y2="168" class="solid"></line>
    <line x1="204" y1="136" x2="188" y2="168" class="solid"></line>
    <path d="M 34,164 A 8,8 0,0,0 40,168" class="nofill"></path>
    <line x1="40" y1="168" x2="76" y2="168" class="solid"></line>
    <line x1="76" y1="168" x2="90" y2="196" class="solid"></line>
    <line x1="148" y1="168" x2="188" y2="168" class="solid"></line>
    <line x1="148" y1="168" x2="134" y2="196" class="solid"></line>
    <path d="M 90,196 A 8,8 0,0,0 96,200" class="nofill"></path>
    <line x1="96" y1="200" x2="128" y2="200" class="solid"></line>
    <path d="M 134,196 A 8,8 0,0,1 128,200" class="nofill"></path>
  </g>
</svg>
</p>
<p>Here’s another elegant solution by <a href="https://github.com/nviennot">Nicolas Viennot</a>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">OffsetArrays</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_path</span>(line) <span class="op">=</span> <span class="fu">getproperty</span>.(<span class="fu">eachmatch</span>(<span class="st">r"</span><span class="ch">(</span><span class="st">e</span><span class="ch">|</span><span class="st">se</span><span class="ch">|</span><span class="st">sw</span><span class="ch">|</span><span class="st">w</span><span class="ch">|</span><span class="st">nw</span><span class="ch">|</span><span class="st">ne</span><span class="ch">)</span><span class="st">"</span>, line), <span class="op">:</span>match)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">parse_path</span>.(<span class="fu">readlines</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>)))</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> hex_dirs <span class="op">=</span> <span class="fu">Dict</span>(k <span class="op">=&gt;</span> <span class="fu">CartesianIndex</span>(v) <span class="cf">for</span> (k,v) <span class="kw">in</span> [</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"e"</span>  <span class="op">=&gt;</span> ( <span class="fl">1</span>,  <span class="fl">0</span>),</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"se"</span> <span class="op">=&gt;</span> ( <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>),</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sw"</span> <span class="op">=&gt;</span> ( <span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>),</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"w"</span>  <span class="op">=&gt;</span> (<span class="op">-</span><span class="fl">1</span>,  <span class="fl">0</span>),</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"nw"</span> <span class="op">=&gt;</span> (<span class="op">-</span><span class="fl">1</span>,  <span class="fl">1</span>),</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ne"</span> <span class="op">=&gt;</span> ( <span class="fl">0</span>,  <span class="fl">1</span>)</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> N <span class="op">=</span> <span class="fl">200</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a><span class="fu">get_destination</span>(path) <span class="op">=</span> <span class="fu">mapreduce</span>(x<span class="op">-&gt;</span>hex_dirs[x], <span class="op">+</span>, path)</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">init_tiles</span>(paths)</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    A <span class="op">=</span> <span class="fu">OffsetArray</span>(<span class="fu">falses</span>(N,N),<span class="op">-</span>N<span class="op">÷</span><span class="fl">2</span><span class="op">-</span><span class="fl">1</span>,<span class="op">-</span>N<span class="op">÷</span><span class="fl">2</span><span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">foreach</span>(dst <span class="op">-&gt;</span> A[dst] <span class="op">⊻=</span> <span class="fl">1</span>, <span class="fu">get_destination</span>.(paths))</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    A</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a><span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">count</span>(<span class="fu">init_tiles</span>(data))</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">get_neighbor_counts</span>(A)</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>    C <span class="op">=</span> <span class="fu">OffsetArray</span>(<span class="fu">zeros</span>(<span class="dt">Int</span>, N<span class="op">-</span><span class="fl">2</span>,N<span class="op">-</span><span class="fl">2</span>),<span class="op">-</span>N<span class="op">÷</span><span class="fl">2</span>,<span class="op">-</span>N<span class="op">÷</span><span class="fl">2</span>)</span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fu">CartesianIndices</span>(C)</span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>        C[i] <span class="op">=</span> <span class="fu">sum</span>(A[i<span class="op">+</span>dir] <span class="cf">for</span> dir <span class="kw">in</span> <span class="fu">values</span>(hex_dirs))</span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>    C</span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">flip_tiles!</span>(A, steps<span class="op">=</span><span class="fl">1</span>)</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> step <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>steps</span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>        C <span class="op">=</span> <span class="fu">get_neighbor_counts</span>(A)</span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="fu">CartesianIndices</span>(C)</span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (A[i] <span class="op">&amp;&amp;</span> C[i] <span class="op">∉</span> (<span class="fl">1</span>,<span class="fl">2</span>)) <span class="op">||</span> (!A[i] <span class="op">&amp;&amp;</span> C[i] <span class="op">==</span> <span class="fl">2</span>)</span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>                A[i] <span class="op">⊻=</span> <span class="fl">1</span></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>    A</span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a><span class="fu">part2</span>(data <span class="op">=</span> <span class="fu">readInput</span>()) <span class="op">=</span> <span class="fu">count</span>(<span class="fu">flip_tiles!</span>(<span class="fu">init_tiles</span>(data), <span class="fl">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And another neat visualization by <a href="https://github.com/tk3369/AdventOfCode2020/">Tom Kwong</a>:</p>
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="https://user-images.githubusercontent.com/1813121/103164912-71063780-47ce-11eb-839a-c0608ca36b70.gif" class="img-fluid figure-img"></p>
<figcaption class="margin-caption"><a href="https://twitter.com/tomkwong/status/1342661344424652801" class="uri">https://twitter.com/tomkwong/status/1342661344424652801</a></figcaption>
</figure>
</div>
</section>
<section id="day-25-combo-breaker" class="level3">
<h3 class="anchored" data-anchor-id="day-25-combo-breaker"><a href="https://adventofcode.com/2020/day/25">Day 25: Combo Breaker</a></h3>
<p>And finally, for the last day, it is a cryptography based puzzle.</p>
<p>The puzzle’s key idea here is based on the <a href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange">Diffie-Hellman key exchange</a>.</p>
<p>Julia also has a function called <code>powermod</code> in the standard library, which can be used for this. Here’s a solution by <a href="https://github.com/nviennot">Nicolas Viennot</a>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readInput</span>() <span class="op">=</span> <span class="fu">parse</span>.(<span class="dt">Int</span>, <span class="fu">split</span>(<span class="fu">strip</span>(<span class="fu">read</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"./input.txt"</span>), <span class="dt">String</span>)), <span class="ch">'\n'</span>))</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">part1</span>(data <span class="op">=</span> <span class="fu">readInput</span>())</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="fl">20201227</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">e</span> <span class="op">=</span> <span class="fl">7</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    card_public_key, door_public_key <span class="op">=</span> data</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    privkey1 <span class="op">=</span> <span class="fu">findfirst</span>(i <span class="op">-&gt;</span> <span class="fu">powermod</span>(<span class="cn">e</span>, i, N) <span class="op">==</span> card_public_key, <span class="fl">1</span><span class="op">:</span>N)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    solution <span class="op">=</span> <span class="fu">powermod</span>(door_public_key, privkey1, N)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you’ve made it all this way, part 2 of day 25 should be a cinch 😉.</p>
</section>
</section>
<section id="final-words" class="level2">
<h2 class="anchored" data-anchor-id="final-words">Final words</h2>
<p>Thanks to everyone in the Julia community who participated on <a href="https://julialang.zulipchat.com">Zulip</a>, <a href="https://julialang.slack.com/">Slack</a> and <a href="https://reddit.com/r/adventofcode">Reddit</a>. I learnt a lot by reading your solutions and discussing with you all.</p>
<p>Thanks to the mods on <a href="https://reddit.com/r/adventofcode">/r/adventofcode</a> to making it such a vibrant community to frequent.</p>
<p>And finally, thanks to <a href="https://twitter.com/ericwastl">Eric Wastl</a> for making such a fun event.</p>
<p>Happy holidays everyone!</p>


</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{krishnamurthy2020,
  author = {Krishnamurthy, Dheepak},
  title = {Advent of {Code} 2020 {Retrospective}},
  date = {2020-12-25},
  url = {https://kdheepak.com/blog/advent-of-code-2020-retrospective},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-krishnamurthy2020" class="csl-entry quarto-appendix-citeas" role="listitem">
<div class="">D.
Krishnamurthy, <span>“Advent of Code 2020 Retrospective,”</span> Dec.
25, 2020. <a href="https://kdheepak.com/blog/advent-of-code-2020-retrospective">https://kdheepak.com/blog/advent-of-code-2020-retrospective</a>.</div>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/.*kdheepak\.com\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kdheepak/kdheepak.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnk1MTIwOTcwMA==" data-category="Comments" data-category-id="DIC_kwDOAw1l5M4CU810" data-mapping="url" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 All views or opinions expressed here are solely mine and are not represented, shared, supported, or endorsed by any employer or entity in any manner.
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/kdheepak/kdheepak.github.io/edit/main/blog/advent-of-code-2020-retrospective/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/kdheepak/kdheepak.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>